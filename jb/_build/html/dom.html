
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>DOM &#8212; Libro DWEC</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=dd2cc81e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'dom';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Iteradores" href="iteradores.html" />
    <link rel="prev" title="Arrays Objetos y clases" href="arraysobjetosclases.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Libro DWEC - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Libro DWEC - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Desarrollo Web en Entorno Cliente (DWEC)
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Javascript</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="desarrollofrontend.html">La Web y el Desarrollo Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="lenguajejavascript.html">El lenguaje Javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="arraysobjetosclases.html">Arrays Objetos y clases</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="iteradores.html">Iteradores</a></li>
<li class="toctree-l1"><a class="reference internal" href="modulos.html">Módulos</a></li>
<li class="toctree-l1"><a class="reference internal" href="promesas.html">Asincronía y Promesas</a></li>
<li class="toctree-l1"><a class="reference internal" href="ajax.html">Comunicación con el servidor</a></li>
<li class="toctree-l1"><a class="reference internal" href="supabase.html">Supabase: (Backend como Servicio)</a></li>
<li class="toctree-l1"><a class="reference internal" href="npm.html">NPM</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="programacionfuncionalreactiva.html">Programación Funcional, Asíncrona y Reactiva en JavaScript</a></li>

<li class="toctree-l1"><a class="reference internal" href="errores.html">Gestión de Errores</a></li>
<li class="toctree-l1"><a class="reference internal" href="webworkers.html">Web Workers</a></li>
<li class="toctree-l1"><a class="reference internal" href="vite.html">Vite</a></li>
<li class="toctree-l1"><a class="reference internal" href="ci-cd.html">Integración y Despliegue Continuo (CI/CD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="proyectos.html">Proyectos en Javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentacion.html">Documentación en JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="proyectovanilla.html">Proyecto completo en Javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="WebComponents.html">Web Components</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Angular</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="typescript.html">Typescript</a></li>
<li class="toctree-l1"><a class="reference internal" href="angular.html">Introducción a Angular</a></li>
<li class="toctree-l1"><a class="reference internal" href="httpangular.html">Comunicación con el servidor en Angular</a></li>
<li class="toctree-l1"><a class="reference internal" href="rutasangular.html">Rutas en Angular</a></li>
<li class="toctree-l1"><a class="reference internal" href="formulariosangular.html">Formularios en Angular</a></li>
<li class="toctree-l1"><a class="reference internal" href="proyectoangular.html">Proyecto Angular</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/xxjcaxx/libro_dwec/tree/master" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/xxjcaxx/libro_dwec/tree/master/issues/new?title=Issue%20on%20page%20%2Fdom.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/dom.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>DOM</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dom-en-javascript">DOM en JavaScript</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#estructura-del-documento-html">Estructura del Documento HTML</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dom-window">DOM: Window</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dom-buscar-nodos">DOM: Buscar Nodos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dom-modificar-nodos">DOM: Modificar Nodos</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#atributos">Atributos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#propiedades">Propiedades</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dom-estilos">DOM: Estilos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creacion-de-elementos-plantillas">Creación de elementos (plantillas)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creacion-de-elementos-template-literal">Creación de Elementos: Template Literal</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creacion-de-elementos-mediante-tagged-template-literals">Creación de elementos mediante Tagged Template Literals</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creacion-de-elementos-interpolaciones-wrapper-fragments">Creación de Elementos: Interpolaciones, Wrapper, fragments</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creacion-de-elementos-con-template">Creación de elementos con <code class="docutils literal notranslate"><span class="pre">&lt;template&gt;</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#esperar-a-que-cargue-el-dom">Esperar a que Cargue el DOM</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#atributos-de-datos">Atributos de Datos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#formularios-en-javascript">Formularios en JavaScript</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#atributos-de-formularios">Atributos de Formularios</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ciclo-tradicional-del-formulario">Ciclo Tradicional del Formulario</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ciclo-del-formulario-con-javascript">Ciclo del Formulario con JavaScript</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-de-interceptar-submit-con-javascript">Ejemplo de Interceptar Submit con JavaScript</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#enviar-formulario-por-javascript">Enviar Formulario por JavaScript</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-de-envio-por-javascript">Ejemplo de Envío por JavaScript</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#validacion-de-formularios">Validación de formularios</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#expresiones-regulares">Expresiones Regulares</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#validacion-y-estilo">Validación y estilo</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ficheros-en-formularios">Ficheros en formularios</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#envio-de-ficheros-con-un-formulario-tradicional">Envío de ficheros con un formulario tradicional</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#envio-de-ficheros-utilizando-json">Envío de ficheros utilizando JSON</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#validacion-de-ficheros">Validación de ficheros</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#imagenes-en-formularios">Imágenes en formularios</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#otros-ficheros">Otros ficheros</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#el-objeto-file">El Objeto <code class="docutils literal notranslate"><span class="pre">File</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#el-objeto-filereader">El objeto <code class="docutils literal notranslate"><span class="pre">FileReader</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eventos-y-handlers">Eventos y Handlers</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eventos-events">Eventos (Events)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manejadores-handlers">Manejadores (Handlers)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-de-uso-en-html-y-javascript">Ejemplo de uso en HTML y JavaScript</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eventos-en-linea">Eventos en línea</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-en-html-no-recomendable">Ejemplo en HTML (No recomendable)</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#registro-tradicional-de-eventos">Registro tradicional de eventos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#registro-avanzado-de-eventos">Registro avanzado de eventos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#obtencion-de-informacion-del-evento">Obtención de información del evento</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#propagacion-y-captura-de-eventos">Propagación y captura de eventos</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#enviar-datos-de-hijos-a-padres-con-eventos-personalizados">Enviar Datos de Hijos a Padres con Eventos Personalizados</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eventos-de-teclado">Eventos de teclado</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#notas-finales">Notas finales</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="dom">
<h1>DOM<a class="headerlink" href="#dom" title="Link to this heading">#</a></h1>
<section id="dom-en-javascript">
<h2>DOM en JavaScript<a class="headerlink" href="#dom-en-javascript" title="Link to this heading">#</a></h2>
<p>El DOM (Document Object Model) es una interfaz de programación que permite a los scripts actualizar el contenido, la estructura y el estilo de un documento mientras este se está visualizando en el navegador.</p>
<section id="estructura-del-documento-html">
<h3>Estructura del Documento HTML<a class="headerlink" href="#estructura-del-documento-html" title="Link to this heading">#</a></h3>
<p>El DOM representa la estructura de un documento HTML y el entorno en el que se ejecuta como una jerarquía de objetos. Los principales componentes son:</p>
<ul class="simple">
<li><p><strong>Window</strong>: Representa la ventana del navegador y es el objeto global en los scripts del navegador.</p></li>
<li><p><strong>Document</strong>: Representa el documento HTML que se carga en la ventana.</p></li>
</ul>
<p>Además de <code class="docutils literal notranslate"><span class="pre">window</span></code> y <code class="docutils literal notranslate"><span class="pre">document</span></code>, hay varios otros objetos principales accesibles en el entorno de una página web, estos se denominan <code class="docutils literal notranslate"><span class="pre">Web</span> <span class="pre">APIs</span></code> :</p>
<ol class="arabic simple">
<li><p><strong>Navigator</strong>: Proporciona información sobre el navegador.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">navigator.userAgent</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">navigator.language</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">navigator.geolocation</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">navigator.getBattery()</span></code></p></li>
</ul>
</li>
<li><p><strong>Screen</strong>: Proporciona información sobre la pantalla del usuario.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">screen.width</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">screen.height</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">screen.availWidth</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">screen.availHeight</span></code></p></li>
</ul>
</li>
<li><p><strong>History</strong>: Permite la manipulación del historial del navegador.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">history.back()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">history.forward()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">history.go()</span></code></p></li>
</ul>
</li>
<li><p><strong>Location</strong>: Proporciona la URL actual de la ventana.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">location.href</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location.hostname</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location.pathname</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location.search</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location.hash</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location.reload()</span></code></p></li>
</ul>
</li>
<li><p><strong>Storage APIs</strong>: LocalStorage, sessionStorage, IndexedDB</p></li>
<li><p><strong>Network APIs</strong>: XMLHttpRequest, fetch</p></li>
<li><p><strong>Console</strong>: Proporciona acceso a la consola de depuración del navegador.</p></li>
<li><p><strong>WebSocket</strong>: Proporciona una interfaz para las conexiones WebSocket.</p></li>
<li><p><strong>Worker</strong>: Permite la ejecución de scripts en segundo plano.</p></li>
</ol>
</section>
</section>
<section id="dom-window">
<h2>DOM: Window<a class="headerlink" href="#dom-window" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Window</span></code> es un objeto predefinido en los navegadores web que representa la ventana en la que se muestra el documento. Algunos métodos importantes de <code class="docutils literal notranslate"><span class="pre">window</span></code> incluyen:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">alert()</span></code>, <code class="docutils literal notranslate"><span class="pre">prompt()</span></code>: Métodos para mostrar diálogos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setTimeout(función,</span> <span class="pre">tiempo)</span></code>: Ejecuta una función después de un tiempo especificado.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setInterval(función,</span> <span class="pre">tiempo)</span></code>: Ejecuta una función repetidamente a intervalos de tiempo especificados.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clearTimeout(identificador)</span></code>: Cancela un <code class="docutils literal notranslate"><span class="pre">setTimeout</span></code> programado.</p></li>
</ul>
<p>Estos métodos no suelen invocarse con <code class="docutils literal notranslate"><span class="pre">window.setTimeout()</span></code>, por ejemplo, porque son accesibles directamente al estar en el ámbito global. De hecho, cualquier función o variable <code class="docutils literal notranslate"><span class="pre">var</span></code> declarada en el ámbito global pasa a ser un atributo del objeto window:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">globalVar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;I&#39;m global!&quot;</span><span class="p">;</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">globalFunction</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;I&#39;m a global function!&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">globalVar</span><span class="p">);</span><span class="w"> </span><span class="c1">// &quot;I&#39;m global!&quot;</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">globalFunction</span><span class="p">();</span><span class="w"> </span><span class="c1">// &quot;I&#39;m a global function!&quot;</span>
</pre></div>
</div>
<p>Esto no ocurre con variables declaradas con <code class="docutils literal notranslate"><span class="pre">let</span></code> o <code class="docutils literal notranslate"><span class="pre">const</span></code>.  La especificación de ECMAScript busca mejorar la claridad y previsibilidad del código. Al evitar que let y const se conviertan en propiedades del objeto window, se fomenta un diseño de código más modular y con menos dependencias globales.</p>
<blockquote>
<div><p>Window no está cuando programamos para <code class="docutils literal notranslate"><span class="pre">Node</span></code> o otros intérpretes de servidor. Por esta razón, el Javascript dedicado al DOM debería estar separado de funciones normales, de manera que estas se puedan reaprovechar si parte de la lógica se mueve al servidor.</p>
</div></blockquote>
</section>
<section id="dom-buscar-nodos">
<h2>DOM: Buscar Nodos<a class="headerlink" href="#dom-buscar-nodos" title="Link to this heading">#</a></h2>
<p>Para manipular elementos del DOM, primero debemos encontrarlos. Los métodos más comunes son:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">document.getElementById(id)</span></code>: Encuentra un elemento por su ID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getElementsByTagName(tag)</span></code>: Encuentra todos los elementos con un nombre de etiqueta específico.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getElementsByName(name)</span></code>: Encuentra todos los elementos con un nombre especificado.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">querySelector(selector)</span></code>: Devuelve el primer elemento que coincide con un selector CSS.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">querySelectorAll(selector)</span></code>: Devuelve un <code class="docutils literal notranslate"><span class="pre">Nodelist</span></code> de todos los elementos que coinciden con un selector CSS.</p></li>
</ul>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;exampleId&#39;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">elements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">elementByName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByName</span><span class="p">(</span><span class="s1">&#39;exampleName&#39;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">firstElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.exampleClass&#39;</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">allElements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.exampleClass&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>El resultado de los métodos que encuentran más de un nodo es un <code class="docutils literal notranslate"><span class="pre">HTMLCollection</span></code> o un <code class="docutils literal notranslate"><span class="pre">NodeList</span></code> . Si queremos tratarlo como un array hay que convertirlo con <code class="docutils literal notranslate"><span class="pre">Array.from()</span></code> o <code class="docutils literal notranslate"><span class="pre">[...HTMLCollection]</span></code>.</p>
<p>A menudo, necesitamos acceder a un nodo específico a partir de uno ya existente en el DOM. Para esto, podemos utilizar los siguientes métodos aplicados a un elemento del árbol DOM:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.parentElement</span></code>: retorna el elemento padre del nodo actual.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.children</span></code>: retorna una colección de todos los elementos hijos del nodo actual (sólo elementos HTML, no incluye comentarios ni nodos de texto).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.childNodes</span></code>: retorna una colección de todos los nodos hijos, incluyendo comentarios y nodos de texto, por lo cual no se usa frecuentemente.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.firstElementChild</span></code>: retorna el primer hijo que es un elemento HTML.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.firstChild</span></code>: retorna el primer nodo hijo, incluyendo nodos de texto o comentarios.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.lastElementChild</span></code>: similar a <code class="docutils literal notranslate"><span class="pre">firstElementChild</span></code>, pero retorna el último hijo elemento HTML.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.lastChild</span></code>: similar a <code class="docutils literal notranslate"><span class="pre">firstChild</span></code>, pero retorna el último nodo hijo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.nextElementSibling</span></code>: retorna el siguiente hermano que es un elemento HTML.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.nextSibling</span></code>: retorna el siguiente nodo hermano, incluyendo nodos de texto o comentarios.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.previousElementSibling</span></code>: similar a <code class="docutils literal notranslate"><span class="pre">nextElementSibling</span></code>, pero retorna el hermano anterior que es un elemento HTML.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.previousSibling</span></code>: similar a <code class="docutils literal notranslate"><span class="pre">nextSibling</span></code>, pero retorna el nodo hermano anterior.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.hasChildNodes()</span></code>: indica si el nodo tiene nodos hijos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.childElementCount</span></code>: retorna el número de elementos hijos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elemento.closest(selector)</span></code>: retorna el ancestro más cercano que coincide con el selector dado. Por ejemplo, si el elemento es un <code class="docutils literal notranslate"><span class="pre">&lt;td&gt;</span></code> dentro de una tabla, <code class="docutils literal notranslate"><span class="pre">elemento.closest('table')</span></code> retornará la tabla a la que pertenece.</p></li>
</ul>
<p>El DOM proporciona accesos directos (atajos) para obtener elementos comunes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">document.documentElement</span></code>: obtiene el nodo del elemento <code class="docutils literal notranslate"><span class="pre">&lt;html&gt;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">document.head</span></code>: obtiene el nodo del elemento <code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">document.body</span></code>: obtiene el nodo del elemento <code class="docutils literal notranslate"><span class="pre">&lt;body&gt;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">document.title</span></code>: obtiene el nodo del elemento <code class="docutils literal notranslate"><span class="pre">&lt;title&gt;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">document.links</span></code>: obtiene una colección de todos los hipervínculos del documento.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">document.anchors</span></code>: obtiene una colección de todas las anclas del documento.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">document.forms</span></code>: obtiene una colección de todos los formularios del documento.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">document.images</span></code>: obtiene una colección de todas las imágenes del documento.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">document.scripts</span></code>: obtiene una colección de todos los scripts del documento.</p></li>
</ul>
<blockquote>
<div><p>No hay una manera mejor que otras en todas las ocasiones de encontrar los nodos. Si no queremos fallar se puede usar <code class="docutils literal notranslate"><span class="pre">querySelector</span></code> y usar selectores de CSS. De esta manera, cambiar el selector es cambiar la “query”. No obstante, los otros selectores más primitivos puede que sean más rápidos en ciertas ocasiones.</p>
</div></blockquote>
</section>
<section id="dom-modificar-nodos">
<h2>DOM: Modificar Nodos<a class="headerlink" href="#dom-modificar-nodos" title="Link to this heading">#</a></h2>
<p>Una vez que hemos encontrado los nodos, podemos modificarlos. Algunos métodos útiles incluyen:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.innerHTML</span></code>, <code class="docutils literal notranslate"><span class="pre">.innerText</span></code>, <code class="docutils literal notranslate"><span class="pre">.outerHTML</span></code>: Para cambiar el contenido HTML o texto de un elemento.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.insertAdjacentHTML(position,</span> <span class="pre">text)</span></code>: Inserta texto HTML en una posición específica. <a class="reference external" href="https://lenguajejs.com/dom/crear/insertadjacent-api/">https://lenguajejs.com/dom/crear/insertadjacent-api/</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.append(content,</span> <span class="pre">element)</span></code>, <code class="docutils literal notranslate"><span class="pre">.prepend(content,</span> <span class="pre">element)</span></code>: Añade contenido al principio o al final de un elemento.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.after()</span></code>, <code class="docutils literal notranslate"><span class="pre">.before()</span></code>: Inserta un elemento antes o después del elemento actual.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.cloneNode(deep)</span></code>: Clona un nodo, con o sin sus hijos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.remove()</span></code>: Elimina un nodo.</p></li>
</ul>
<p>Métodos más antiguos pero aún en uso incluyen <code class="docutils literal notranslate"><span class="pre">removeChild()</span></code> y <code class="docutils literal notranslate"><span class="pre">appendChild()</span></code>.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;exampleId&#39;</span><span class="p">);</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Nuevo contenido&#39;</span><span class="p">;</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="s1">&#39;beforeend&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&lt;p&gt;Más contenido&lt;/p&gt;&#39;</span><span class="p">);</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;Texto adicional&#39;</span><span class="p">);</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
</pre></div>
</div>
<section id="atributos">
<h3>Atributos<a class="headerlink" href="#atributos" title="Link to this heading">#</a></h3>
<p>Los elementos suelen tener atributos. Algunos son especiales como el <code class="docutils literal notranslate"><span class="pre">id</span></code> o la <code class="docutils literal notranslate"><span class="pre">class</span></code>. El <code class="docutils literal notranslate"><span class="pre">id</span></code> está accesible directamente como atributo del elemento, así como el <code class="docutils literal notranslate"><span class="pre">className</span></code>, aunque luego veremos que es mejor manipularlo de otra manera. Otros atributos como <code class="docutils literal notranslate"><span class="pre">value</span></code> en los <code class="docutils literal notranslate"><span class="pre">Input</span></code>o <code class="docutils literal notranslate"><span class="pre">scr</span></code> en los <code class="docutils literal notranslate"><span class="pre">&lt;img&gt;</span></code> también pueden ser leidos y modificados como propiedades. Se trata de los atributos <strong>estándar</strong>.</p>
<p>Para los atributos que no tienen acceso directo porque no son estándar, podemos usar <code class="docutils literal notranslate"><span class="pre">setAttribute()</span></code> <code class="docutils literal notranslate"><span class="pre">getAttribute()</span></code>, <code class="docutils literal notranslate"><span class="pre">hasAttribute()</span></code> o <code class="docutils literal notranslate"><span class="pre">removeAttribute()</span></code>:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">button</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;button&quot;</span><span class="p">);</span>

<span class="nx">button</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;helloButton&quot;</span><span class="p">);</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="propiedades">
<h3>Propiedades<a class="headerlink" href="#propiedades" title="Link to this heading">#</a></h3>
<p>Puesto que los elementos HTML al ser parseados y convertidos al DOM se convierten en objetos, estos son manipulables como cualquier objeto, pudiendo añadir o modificar propiedades, incluso aquellas que vienen en el HTML como atributos estándar.</p>
<blockquote>
<div><p>Atributos como <code class="docutils literal notranslate"><span class="pre">id</span></code> se sincronizan perfectamente con la propiedad. Otros como <code class="docutils literal notranslate"><span class="pre">value</span></code> no se sincronizan directamente: <a class="reference external" href="https://es.javascript.info/dom-attributes-and-properties#sincronizacion-de-propiedad-y-atributo">https://es.javascript.info/dom-attributes-and-properties#sincronizacion-de-propiedad-y-atributo</a></p>
</div></blockquote>
<blockquote>
<div><p>Hay unos atributos que se sincronizan de forma especial con las propiedades. Son los que comienzan por <code class="docutils literal notranslate"><span class="pre">data-</span></code>, que se guardan en un objeto <code class="docutils literal notranslate"><span class="pre">.dataset</span></code> del elemento en el DOM. Esto lo explicamos en la sección de <strong>Atributos de datos</strong>.</p>
</div></blockquote>
</section>
</section>
<section id="dom-estilos">
<h2>DOM: Estilos<a class="headerlink" href="#dom-estilos" title="Link to this heading">#</a></h2>
<p>Para manipular los estilos de un elemento, podemos usar propiedades de estilo y clases CSS.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.style.property</span></code>: Modifica un estilo CSS directamente.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.className</span></code>: Cambia el nombre de la clase del elemento.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.classList.add()</span></code>, <code class="docutils literal notranslate"><span class="pre">.classList.toggle()</span></code>, <code class="docutils literal notranslate"><span class="pre">.classList.remove()</span></code>, <code class="docutils literal notranslate"><span class="pre">.classList.replace()</span></code>: Métodos para manipular clases CSS de manera más dinámica.</p></li>
</ul>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;exampleId&#39;</span><span class="p">);</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;blue&#39;</span><span class="p">;</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;new-class&#39;</span><span class="p">);</span>
<span class="nx">element</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;old-class&#39;</span><span class="p">);</span>
</pre></div>
</div>
<blockquote>
<div><p>ClassName no debería usarse, ya que puede molestar si se usa classList por otro lado. Usaremos classList en todas las ocasiones excepto para eliminar todas las clases.</p>
</div></blockquote>
</section>
<section id="creacion-de-elementos-plantillas">
<h2>Creación de elementos (plantillas)<a class="headerlink" href="#creacion-de-elementos-plantillas" title="Link to this heading">#</a></h2>
<p>Se pueden crear elementos totalmente de forma programática. Pero puede ser tedioso. Muchas veces, si sabemos que hay fragmentos de HTML bastante estáticos, podemos usar <code class="docutils literal notranslate"><span class="pre">innerHTML</span></code> y <code class="docutils literal notranslate"><span class="pre">.append()</span></code> con plantillas creadas mediante strings.</p>
<p>Para crear elementos del DOM mediante plantillas hay muchas formas. Obviaremos las más farragosas y nos centraremos en aquellas que son más rápidas.</p>
<section id="creacion-de-elementos-template-literal">
<h3>Creación de Elementos: Template Literal<a class="headerlink" href="#creacion-de-elementos-template-literal" title="Link to this heading">#</a></h3>
<p>Los template literals y las interpolaciones de cadenas permiten crear contenido dinámico de manera sencilla.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">generateGraphCard</span><span class="p">(</span><span class="nx">graph</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">cardTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">cardTemplate</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;col&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">cardTemplate</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
<span class="sb">        &lt;div class=&quot;card&quot;&gt;</span>
<span class="sb">            &lt;div class=&quot;card-header&quot;&gt;</span><span class="si">${</span><span class="nx">graph</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span><span class="sb">&lt;/div&gt;</span>
<span class="sb">            &lt;div class=&quot;card-body&quot;&gt;</span>
<span class="sb">                &lt;div class=&quot;graph&quot;&gt;&lt;/div&gt;</span>
<span class="sb">                &lt;p class=&quot;card-text&quot;&gt;</span><span class="si">${</span><span class="nx">graph</span><span class="p">.</span><span class="nx">description</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
<span class="sb">                &lt;a href=&quot;#/graph/</span><span class="si">${</span><span class="nx">graph</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">&quot; class=&quot;btn btn-primary&quot;&gt;Full screen&lt;/a&gt;</span>
<span class="sb">            &lt;/div&gt;</span>
<span class="sb">        &lt;/div&gt;`</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">graphContainer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">cardTemplate</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;.graph&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">graphContainer</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">graph</span><span class="p">.</span><span class="nx">Data</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">generateBarGraph</span><span class="p">(</span><span class="nx">graph</span><span class="p">.</span><span class="nx">Data</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">graphPlaceholder</span><span class="p">());</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">cardTemplate</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="creacion-de-elementos-mediante-tagged-template-literals">
<h3>Creación de elementos mediante Tagged Template Literals<a class="headerlink" href="#creacion-de-elementos-mediante-tagged-template-literals" title="Link to this heading">#</a></h3>
<p>Los “Tagged Template Literals” son una característica de JavaScript que te permite crear funciones que aceptan una plantilla literal y sus interpolaciones. Estas funciones son invocadas de forma muy diferente, ya que no tienen (parentesis) y se entiende que el primer argumento es la plantilla y el resto de argumentos son los distintos valores de las variables interpoladas.</p>
<p>En lugar de recibir una sola cadena de texto con las interpolaciones <code class="docutils literal notranslate"><span class="pre">${}</span></code>, la función de etiqueta recibe dos argumentos separados: un array de strings y un array con los valores interpolados.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="p">(()=&gt;{</span>
<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">miTaggedTemplateLiteral</span><span class="p">(</span><span class="nx">strings</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">values</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">strings</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">values</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Carlos&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">edad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">32</span><span class="p">;</span>
<span class="w">  </span><span class="nx">miTaggedTemplateLiteral</span><span class="sb">`Hola soy </span><span class="si">${</span><span class="nx">nombre</span><span class="si">}</span><span class="sb"> y tengo </span><span class="si">${</span><span class="nx">edad</span><span class="si">}</span><span class="sb"> años`</span><span class="p">;</span>
<span class="p">})();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[ <span class=" -Color -Color-Green">&quot;Hola soy &quot;</span>, <span class=" -Color -Color-Green">&quot; y tengo &quot;</span>, <span class=" -Color -Color-Green">&quot; años&quot;</span> ] Carlos <span class=" -Color -Color-Yellow">32</span>
</pre></div>
</div>
</div>
</div>
<p>En el siguiente ejemplo, extraido de <a class="reference external" href="https://exploringjs.com/es6/ch_template-literals.html#sec_html-tag-function-implementation">https://exploringjs.com/es6/ch_template-literals.html#sec_html-tag-function-implementation</a> se puede ver cómo hacer una función para tagged template literal que personalice una plantilla.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">htmlEscape</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">str</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;/g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&amp;amp;&#39;</span><span class="p">)</span><span class="w"> </span><span class="c1">// first!</span>
<span class="w">            </span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&gt;/g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&amp;gt;&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&amp;lt;&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&quot;/g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&amp;quot;&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&#39;/g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&amp;#39;&#39;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/`/g</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&amp;#96;&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">html</span><span class="p">(</span><span class="nx">templateObject</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">substs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Use raw template strings: we don’t want</span>
<span class="w">  </span><span class="c1">// backslashes (\n etc.) to be interpreted</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">raw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">templateObject</span><span class="p">.</span><span class="nx">raw</span><span class="p">;</span>

<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="w">  </span><span class="nx">substs</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">subst</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// Retrieve the template string preceding</span>
<span class="w">      </span><span class="c1">// the current substitution</span>
<span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="nx">lit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">raw</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

<span class="w">      </span><span class="c1">// In the example, map() returns an Array:</span>
<span class="w">      </span><span class="c1">// If `subst` is an Array (and not a string),</span>
<span class="w">      </span><span class="c1">// we turn it into a string</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">subst</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">subst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">subst</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>

<span class="w">      </span><span class="c1">// If the substitution is preceded by an exclamation</span>
<span class="w">      </span><span class="c1">// mark, we escape special characters in it</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">lit</span><span class="p">.</span><span class="nx">endsWith</span><span class="p">(</span><span class="s1">&#39;!&#39;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nx">subst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">htmlEscape</span><span class="p">(</span><span class="nx">subst</span><span class="p">);</span>
<span class="w">          </span><span class="nx">lit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">lit</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="nx">result</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">lit</span><span class="p">;</span>
<span class="w">      </span><span class="nx">result</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">subst</span><span class="p">;</span>
<span class="w">  </span><span class="p">});</span>
<span class="w">  </span><span class="c1">// Take care of last template string</span>
<span class="w">  </span><span class="nx">result</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">raw</span><span class="p">[</span><span class="nx">raw</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mf">1</span><span class="p">];</span><span class="w"> </span><span class="c1">// (A)</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">tmpl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">addrs</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">html</span><span class="sb">`</span>
<span class="sb">    &lt;table&gt;</span>
<span class="sb">    </span><span class="si">${</span><span class="nx">addrs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">addr</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">html</span><span class="sb">`</span>
<span class="sb">        &lt;tr&gt;&lt;td&gt;!</span><span class="si">${</span><span class="nx">addr</span><span class="p">.</span><span class="nx">first</span><span class="si">}</span><span class="sb">&lt;/td&gt;&lt;/tr&gt;</span>
<span class="sb">        &lt;tr&gt;&lt;td&gt;!</span><span class="si">${</span><span class="nx">addr</span><span class="p">.</span><span class="nx">last</span><span class="si">}</span><span class="sb">&lt;/td&gt;&lt;/tr&gt;</span>
<span class="sb">    `</span><span class="p">)</span><span class="si">}</span>
<span class="sb">    &lt;/table&gt;</span>
<span class="sb">`</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;Jane&gt;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">last</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Bond&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Lars&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">last</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;Croft&gt;&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="p">];</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tmpl</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    &lt;table&gt;
    
        &lt;tr&gt;&lt;td&gt;&amp;lt;Jane&amp;gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Bond&lt;/td&gt;&lt;/tr&gt;
    
        &lt;tr&gt;&lt;td&gt;Lars&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&amp;lt;Croft&amp;gt;&lt;/td&gt;&lt;/tr&gt;
    
    &lt;/table&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="creacion-de-elementos-interpolaciones-wrapper-fragments">
<h3>Creación de Elementos: Interpolaciones, Wrapper, fragments<a class="headerlink" href="#creacion-de-elementos-interpolaciones-wrapper-fragments" title="Link to this heading">#</a></h3>
<p>Podemos usar funciones para extraer e implementar interpolaciones en template literals.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">extractInterpolations</span><span class="p">(</span><span class="nx">template</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">regex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">/\{\{([^\{\}]*)\}\}/g</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[...</span><span class="nx">template</span><span class="p">.</span><span class="nx">matchAll</span><span class="p">(</span><span class="nx">regex</span><span class="p">)];</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">applyInterpolations</span><span class="p">(</span><span class="nx">template</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">extractInterpolations</span><span class="p">(</span><span class="nx">template</span><span class="p">).</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">T</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nx">I</span><span class="p">,</span><span class="w"> </span><span class="nx">att</span><span class="p">])</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span>
<span class="w">        </span><span class="nx">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">T</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">I</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">[</span><span class="nx">att</span><span class="p">]),</span><span class="w"> </span><span class="nx">template</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">wrapElement</span><span class="p">(</span><span class="nx">innerHTML</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">wrapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">innerHTML</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">firstElementChild</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">renderNews</span><span class="p">(</span><span class="nx">news</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">newsTemplate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
<span class="sb">        &lt;article id=&quot;article_{{id}}&quot;&gt;</span>
<span class="sb">            &lt;a href=&quot;{{link}}&quot;&gt;&lt;h2&gt;{{headline}}&lt;/h2&gt;&lt;/a&gt;</span>
<span class="sb">            &lt;time&gt;{{date}}&lt;/time&gt;&lt;address&gt;{{authors}}&lt;/address&gt;</span>
<span class="sb">            &lt;p&gt;{{short_description}}&lt;/p&gt;</span>
<span class="sb">            &lt;p&gt;{{category}}&lt;/p&gt;</span>
<span class="sb">        &lt;/article&gt;`</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">wrapElement</span><span class="p">(</span><span class="nx">applyInterpolations</span><span class="p">(</span><span class="nx">newsTemplate</span><span class="p">,</span><span class="w"> </span><span class="nx">news</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Este ejemplo es un poco más complicado de lo que se espera poder hacer a estas alturas. No obstante, es interesante intentar entender su funcionamiento. En él se usan <code class="docutils literal notranslate"><span class="pre">{{}}</span></code> como interpolaciones como en <code class="docutils literal notranslate"><span class="pre">Angular</span></code>. Esta puede ser una base para hacer un motor de plantillas como tienen los frameworks. Por otro lado, se crea un div que actua de <code class="docutils literal notranslate"><span class="pre">Wrapper</span></code>, és dedir, que envuelve el verdadero elemento para poder trabajar sólo con strings hasta el final, pero retornar un <code class="docutils literal notranslate"><span class="pre">Element</span></code>, gracias a <code class="docutils literal notranslate"><span class="pre">innerHTML</span></code>.</p>
<p>Como mejora al ejemplo anterior, el <code class="docutils literal notranslate"><span class="pre">Wrapper</span></code> puede ser un <code class="docutils literal notranslate"><span class="pre">fragment</span></code>. Este tiene mejor rendimiento, no solo permite sacar el primer elemento hijo, por lo que no necesitamos un div que los contenga y no genera un nodo adicional. Es muy eficiente insertando múltiples nodos, para insertar en bucle.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">renderComments</span><span class="p">(</span><span class="nx">comments</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">fragment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">();</span>

<span class="w">    </span><span class="nx">comments</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">comment</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">commentElement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="nx">commentElement</span><span class="p">.</span><span class="nx">className</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;comment&#39;</span><span class="p">;</span>
<span class="w">        </span><span class="nx">commentElement</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span>
<span class="sb">            &lt;h4&gt;</span><span class="si">${</span><span class="nx">comment</span><span class="p">.</span><span class="nx">author</span><span class="si">}</span><span class="sb">&lt;/h4&gt;</span>
<span class="sb">            &lt;p&gt;</span><span class="si">${</span><span class="nx">comment</span><span class="p">.</span><span class="nx">text</span><span class="si">}</span><span class="sb">&lt;/p&gt;</span>
<span class="sb">            &lt;time&gt;</span><span class="si">${</span><span class="nx">comment</span><span class="p">.</span><span class="nx">date</span><span class="si">}</span><span class="sb">&lt;/time&gt;</span>
<span class="sb">        `</span><span class="p">;</span>
<span class="w">        </span><span class="nx">fragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">commentElement</span><span class="p">);</span><span class="w"> </span><span class="c1">// Añadir cada comentario al fragmento, no al DOM</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nx">fragment</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Datos de ejemplo</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">comments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">author</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Ana&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;¡Buen artículo!&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">date</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;2024-11-11&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">author</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Luis&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Gracias por la información.&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">date</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;2024-11-10&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">author</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Marta&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Me ha resultado muy útil.&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">date</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;2024-11-09&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">];</span>

<span class="c1">// Llamada a la función para renderizar los comentarios</span>
<span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;comments-section&#39;</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">renderComments</span><span class="p">(</span><span class="nx">comments</span><span class="p">));</span><span class="w"> </span>
<span class="w"> </span><span class="c1">// Insertar todos los comentarios a la vez;</span>
</pre></div>
</div>
</section>
<section id="creacion-de-elementos-con-template">
<h3>Creación de elementos con <code class="docutils literal notranslate"><span class="pre">&lt;template&gt;</span></code><a class="headerlink" href="#creacion-de-elementos-con-template" title="Link to this heading">#</a></h3>
<p>La etiqueta <code class="docutils literal notranslate"><span class="pre">&lt;template&gt;</span></code> es especial. Su interior no se renderiza como el resto, pero queda accesible para ser buscado. La utilidad es crear plantillas en HTML que puedan ser clonadas y rellenadas como se desee.</p>
<p>Veamos este HTML extraido de la web de referencia: <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template:">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template:</a></p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">table</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;producttable&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>UPC_Code<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>Product_Name<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- datos opcionales pueden incluirse aquí opcionalmente --&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">template</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;productrow&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;record&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">template</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Y con este javascript obtenemos el contenido del template, se clona y se rellena las veces que sea necesario:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Test to see if the browser supports the HTML template element by checking</span>
<span class="c1">// for the presence of the template element&#39;s content attribute.</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;template&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Instantiate the table with the existing HTML tbody</span>
<span class="w">  </span><span class="c1">// and the row with the template</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tbody</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;tbody&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;#productrow&quot;</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Clone the new row and insert it into the table</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">clone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">template</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">td</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">clone</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;td&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">td</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1235646565&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">td</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Stuff&quot;</span><span class="p">;</span>

<span class="w">  </span><span class="nx">tbody</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">clone</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Clone the new row and insert it into the table</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">clone2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">template</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">  </span><span class="nx">td</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">clone2</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;td&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">td</span><span class="p">[</span><span class="mf">0</span><span class="p">].</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0384928528&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="nx">td</span><span class="p">[</span><span class="mf">1</span><span class="p">].</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Acme Kidney Beans 2&quot;</span><span class="p">;</span>

<span class="w">  </span><span class="nx">tbody</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">clone2</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Find another way to add the rows to the table because</span>
<span class="w">  </span><span class="c1">// the HTML template element is not supported.</span>
<span class="p">}</span>
</pre></div>
</div>
<blockquote>
<div><p>Cualquiera de las formas que hemos visto para crear elementos, mediante template literal o funciones tagged, creando nuestras interpolaciones o con templates es válida y combinable. Para lograr lo que los frameworks hacen con sus motores de plantilla hay mucho trecho, porque no se ha hablado del <code class="docutils literal notranslate"><span class="pre">shadow</span> <span class="pre">DOM</span></code> y otras técnicas avanzadas como los <code class="docutils literal notranslate"><span class="pre">custom</span> <span class="pre">elements</span></code> para lograr plantillas con reactividad. Si logramos hacer un motor de plantillas suficientemente genérico para la aplicación en la que estamos trabajando, el uso de frameworks queda mucho menos justificado.</p>
</div></blockquote>
</section>
</section>
<section id="esperar-a-que-cargue-el-dom">
<h2>Esperar a que Cargue el DOM<a class="headerlink" href="#esperar-a-que-cargue-el-dom" title="Link to this heading">#</a></h2>
<p>Podemos asegurarnos de que el DOM esté completamente cargado antes de ejecutar nuestro script utilizando <code class="docutils literal notranslate"><span class="pre">DOMContentLoaded</span></code>.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">100</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="nx">container</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="nx">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">number</span><span class="p">.</span><span class="nx">innerHTML</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">i</span><span class="p">;</span>
<span class="w">            </span><span class="nx">container</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">number</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">})();</span>
</pre></div>
</div>
<p>También podemos colocar nuestro script al final del cuerpo (<code class="docutils literal notranslate"><span class="pre">body</span></code>) del documento HTML.</p>
<p>Si, además, añadimos el atributo <code class="docutils literal notranslate"><span class="pre">defer</span></code>a un script, este se descargará de manera asíncrona y se ejecutará cuando el HTML haya sido totalmente interpretado y justo antes que <code class="docutils literal notranslate"><span class="pre">DOMContentLoaded</span></code>.</p>
<p>Si es necesario esperar a que carge también todo el CSS, es decir el <code class="docutils literal notranslate"><span class="pre">CSSOM</span></code>, podemos recurrir al evento <code class="docutils literal notranslate"><span class="pre">load</span></code>, que espera a cargar e interpretar todo el CSS. Pero si no es necesario, es mejor esperar sólo al DOM. Esto es porque hay recursos muy pesados como imágenes o vídeos que puede incluso que no lleguen a cargar.</p>
<blockquote>
<div><p>En general, recomendaremos usar <code class="docutils literal notranslate"><span class="pre">DOMContentLoaded</span></code> en vez de poner el script al final o <code class="docutils literal notranslate"><span class="pre">load</span></code> porque al ser ejecutado al principio, ya hay cosas que se puede ir ejecutando sin necesidad de DOM antes de que cargue totalmente. En cualquier caso, los script en <em><strong>Módulos</strong></em> siempre se ejecutan en modo <code class="docutils literal notranslate"><span class="pre">defer</span></code>.</p>
</div></blockquote>
</section>
<section id="atributos-de-datos">
<h2>Atributos de Datos<a class="headerlink" href="#atributos-de-datos" title="Link to this heading">#</a></h2>
<p>HTML5 permite agregar atributos personalizados no visuales a las etiquetas utilizando <code class="docutils literal notranslate"><span class="pre">data-*</span></code>. Estos atributos pueden ser accesibles a través de JavaScript usando <code class="docutils literal notranslate"><span class="pre">dataset</span></code>.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">article</span>
    <span class="na">id</span><span class="o">=</span><span class="s">&quot;electriccars&quot;</span>
    <span class="na">data-columns</span><span class="o">=</span><span class="s">&quot;3&quot;</span>
    <span class="na">data-index-number</span><span class="o">=</span><span class="s">&quot;12314&quot;</span>
    <span class="na">data-parent</span><span class="o">=</span><span class="s">&quot;cars&quot;</span><span class="p">&gt;</span>
    ...
<span class="p">&lt;/</span><span class="nt">article</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">article</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;electriccars&#39;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">article</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">columns</span><span class="p">);</span><span class="w"> </span><span class="c1">// 3</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">article</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">indexNumber</span><span class="p">);</span><span class="w"> </span><span class="c1">// 12314</span>
</pre></div>
</div>
</section>
<section id="formularios-en-javascript">
<h2>Formularios en JavaScript<a class="headerlink" href="#formularios-en-javascript" title="Link to this heading">#</a></h2>
<p>En una aplicación web, la validación de los formularios se realiza tanto en el lado del cliente como en el del servidor.</p>
<blockquote>
<div><p>De hecho, la única validación estrictamente necesaria se debe hacer en el servidor para evitar peticiones ilegales por clientes como postman o curl.</p>
</div></blockquote>
<p>Pero se puede usar Javascript para mucho más que validar formularios. Por ejemplo, nos puede ayudar a autocompletar campos, descargar datos en segundo plano o tratar con imágenes o datos complejos antes de enviar al servidor.</p>
<section id="atributos-de-formularios">
<h3>Atributos de Formularios<a class="headerlink" href="#atributos-de-formularios" title="Link to this heading">#</a></h3>
<p>El contenido de los campos de entrada en un formulario se puede visualizar y modificar utilizando el atributo <code class="docutils literal notranslate"><span class="pre">value</span></code>. Otros elementos del formulario, como los botones de opción (radio button) y las casillas de verificación (checkbox), deben tener un <code class="docutils literal notranslate"><span class="pre">name</span></code> común y también utilizan los atributos <code class="docutils literal notranslate"><span class="pre">value</span></code> y <code class="docutils literal notranslate"><span class="pre">checked</span></code>. Para los elementos <code class="docutils literal notranslate"><span class="pre">select</span></code>, se utilizan los atributos <code class="docutils literal notranslate"><span class="pre">options</span></code> y <code class="docutils literal notranslate"><span class="pre">selectedIndex</span></code>.</p>
<p>Observa el ejemplo a continuación, que usa la manera (obsoleta) de asociar eventos <code class="docutils literal notranslate"><span class="pre">onclick</span></code> para ejecutar una función que informe de los valores de los inputs del formulario:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;es&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Formulario de Ejemplo<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;exampleForm&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;textInput&quot;</span><span class="p">&gt;</span>Texto:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;textInput&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Texto inicial&quot;</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
        
        <span class="p">&lt;</span><span class="nt">label</span><span class="p">&gt;</span>Opciones:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;options&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;opcion1&quot;</span> <span class="na">checked</span><span class="p">&gt;</span> Opción 1
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;radio&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;options&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;opcion2&quot;</span><span class="p">&gt;</span> Opción 2<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
        
        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;checkboxInput&quot;</span><span class="p">&gt;</span>Casilla:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;checkboxInput&quot;</span> <span class="na">checked</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
        
        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;selectInput&quot;</span><span class="p">&gt;</span>Selecciona:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">select</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;selectInput&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>Opción 1<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;2&quot;</span> <span class="na">selected</span><span class="p">&gt;</span>Opción 2<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;3&quot;</span><span class="p">&gt;</span>Opción 3<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
        
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;manipulateValues()&quot;</span><span class="p">&gt;</span>Ver y Manipular Valores<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;script.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">manipulateValues</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Obtener el valor del campo de texto</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">textInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;textInput&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Valor del campo de texto:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">textInput</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="w">    </span><span class="nx">textInput</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Nuevo texto&#39;</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Obtener el valor del radio button seleccionado</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">selectedOption</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;options&quot;]:checked&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Valor del radio button seleccionado:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">selectedOption</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Cambiar la selección del radio button</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;input[name=&quot;options&quot;][value=&quot;opcion2&quot;]&#39;</span><span class="p">).</span><span class="nx">checked</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Obtener el valor del checkbox</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">checkboxInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;checkboxInput&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Checkbox está marcado:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">checkboxInput</span><span class="p">.</span><span class="nx">checked</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Cambiar el estado del checkbox</span>
<span class="w">    </span><span class="nx">checkboxInput</span><span class="p">.</span><span class="nx">checked</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="nx">checkboxInput</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// Obtener el valor del select</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">selectInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;selectInput&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Valor del select:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">selectInput</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Cambiar la selección del select</span>
<span class="w">    </span><span class="nx">selectInput</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="ciclo-tradicional-del-formulario">
<h3>Ciclo Tradicional del Formulario<a class="headerlink" href="#ciclo-tradicional-del-formulario" title="Link to this heading">#</a></h3>
<p>Tradicionalmente, un formulario está diseñado para enviar datos mediante HTTP al servidor. Al enviar (submit) un formulario, el navegador empaqueta los datos y los envía utilizando el método HTTP especificado (como GET o POST). Los formularios pueden incluir validación interna mediante HTML, lo que es más rápido que JavaScript pero ofrece menos control y personalización. La validación interna de HTML genera pseudo-clases que pueden estilizarse con CSS.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;es&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Formulario con Validación<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;styles.css&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;validationForm&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;name&quot;</span><span class="p">&gt;</span>Nombre:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;name&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;name&quot;</span> <span class="na">required</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
        
        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;email&quot;</span><span class="p">&gt;</span>Correo Electrónico:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;email&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;email&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;email&quot;</span> <span class="na">required</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
        
        <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;password&quot;</span><span class="p">&gt;</span>Contraseña:<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;password&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;password&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;password&quot;</span> <span class="na">required</span> <span class="na">minlength</span><span class="o">=</span><span class="s">&quot;6&quot;</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
        
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="p">&gt;</span>Enviar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;script.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="c">/* Estilos básicos */</span>
<span class="nt">form</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">label</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">block</span><span class="p">;</span>
<span class="w">    </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">input</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="mh">#ccc</span><span class="p">;</span>
<span class="w">    </span><span class="k">border-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">box-sizing</span><span class="p">:</span><span class="w"> </span><span class="kc">border-box</span><span class="p">;</span>
<span class="p">}</span>

<span class="c">/* Pseudo-clases para la validación */</span>
<span class="nt">input</span><span class="p">:</span><span class="nd">required</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">border-left</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="mh">#0000FF</span><span class="p">;</span><span class="w"> </span><span class="c">/* Borde azul para campos requeridos */</span>
<span class="p">}</span>

<span class="nt">input</span><span class="p">:</span><span class="nd">valid</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">border-left</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="mh">#00FF00</span><span class="p">;</span><span class="w"> </span><span class="c">/* Borde verde para campos válidos */</span>
<span class="p">}</span>

<span class="nt">input</span><span class="p">:</span><span class="nd">invalid</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">border-left</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="mh">#FF0000</span><span class="p">;</span><span class="w"> </span><span class="c">/* Borde rojo para campos inválidos */</span>
<span class="p">}</span>

<span class="c">/* Pseudo-clase para campo enfocado */</span>
<span class="nt">input</span><span class="p">:</span><span class="nd">focus</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">outline</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="w">    </span><span class="k">border-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#66AFE9</span><span class="p">;</span>
<span class="w">    </span><span class="k">box-shadow</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">8</span><span class="kt">px</span><span class="w"> </span><span class="nb">rgba</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="mi">175</span><span class="p">,</span><span class="w"> </span><span class="mi">233</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;validationForm&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span><span class="w"> </span><span class="c1">// Evita el envío del formulario para la demostración</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Formulario enviado correctamente (validación exitosa)&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Este ejemplo demuestra cómo utilizar pseudo-clases CSS para estilizar formularios con validación interna en HTML.</p>
</section>
<section id="ciclo-del-formulario-con-javascript">
<h3>Ciclo del Formulario con JavaScript<a class="headerlink" href="#ciclo-del-formulario-con-javascript" title="Link to this heading">#</a></h3>
<p>Podemos interceptar y detener el ciclo por defecto de un formulario para validarlo y enviarlo utilizando JavaScript. De esta manera, podemos evitar tener un botón <code class="docutils literal notranslate"><span class="pre">submit</span></code> y controlar completamente el proceso de envío. Si el formulario envía datos al servidor y se refresca, JavaScript pierde el control del programa. Para evitar esto, podemos utilizar <code class="docutils literal notranslate"><span class="pre">preventDefault()</span></code> dentro del evento <code class="docutils literal notranslate"><span class="pre">submit</span></code> o devolver <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<section id="ejemplo-de-interceptar-submit-con-javascript">
<h4>Ejemplo de Interceptar Submit con JavaScript<a class="headerlink" href="#ejemplo-de-interceptar-submit-con-javascript" title="Link to this heading">#</a></h4>
<p>Podemos manejar eventos de formularios para personalizar su comportamiento. Un ejemplo común es el uso del evento <code class="docutils literal notranslate"><span class="pre">onsubmit</span></code> para ejecutar una función de validación antes de enviar el formulario. Si la función de validación devuelve <code class="docutils literal notranslate"><span class="pre">true</span></code>, el formulario se envía; de lo contrario, se cancela el envío.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;formulario&quot;</span> <span class="na">onsubmit</span><span class="o">=</span><span class="s">&quot;return validar();&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;phone-number&quot;</span> <span class="na">required</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="p">&gt;</span>Enviar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">validar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">phoneNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;phone-number&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">phoneRGEX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/</span><span class="p">;</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">phoneResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">phoneRGEX</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">phoneNumber</span><span class="p">);</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;phone: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">phoneResult</span><span class="p">);</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">phoneResult</span><span class="p">;</span><span class="w"> </span><span class="c1">// Retorna true si es válido, de lo contrario false</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="enviar-formulario-por-javascript">
<h3>Enviar Formulario por JavaScript<a class="headerlink" href="#enviar-formulario-por-javascript" title="Link to this heading">#</a></h3>
<p>Podemos enviar un formulario mediante JavaScript utilizando el método <code class="docutils literal notranslate"><span class="pre">submit()</span></code>. Esto es útil cuando queremos enviar el formulario después de realizar alguna operación adicional o validación personalizada.</p>
<section id="ejemplo-de-envio-por-javascript">
<h4>Ejemplo de Envío por JavaScript<a class="headerlink" href="#ejemplo-de-envio-por-javascript" title="Link to this heading">#</a></h4>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;enviarFormulario()&quot;</span><span class="p">&gt;</span>Enviar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">enviarFormulario</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">formulario</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;formulario&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">formulario</span><span class="p">.</span><span class="nx">submit</span><span class="p">();</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Pero si no nos vale con enviar el formulario con <code class="docutils literal notranslate"><span class="pre">submit()</span></code> y queremos manipular sus datos antes de enviar o enviar a una API por POST manualmente, obtendremos el contenido input por input o con <code class="docutils literal notranslate"><span class="pre">FormData</span></code>:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">div</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;#buttonSubmit&quot;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">newProfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">fromEntries</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">(</span><span class="nx">div</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">)).</span><span class="nx">entries</span><span class="p">());</span>
<span class="w">      </span><span class="nx">updateCurrentProfile</span><span class="p">(</span><span class="nx">newProfile</span><span class="p">);</span><span class="w"> </span><span class="c1">// Le pasamos un objeto. Aunque en una petición POST tradicional podemos enviar un FormData directamente con fetch</span>
<span class="w">    </span><span class="p">});</span>
</pre></div>
</div>
<blockquote>
<div><p>Mirar el capítulo de comunicación con el servidor para más información y ejemplos con `FormData</p>
</div></blockquote>
</section>
</section>
<section id="validacion-de-formularios">
<h3>Validación de formularios<a class="headerlink" href="#validacion-de-formularios" title="Link to this heading">#</a></h3>
<p>Puesto que podemos interceptar el ciclo del formulario o atender a cualquier evento y leer y escribir el <code class="docutils literal notranslate"><span class="pre">value</span></code> de los <code class="docutils literal notranslate"><span class="pre">inputs</span></code>, validar el formulario es sencillo. No obstante, cuando hay que hacer muchos formularios o muy grandes, el código puede resultar farragoso. En ese caso, hay técnicas como crear funciones validadoras que hacen el código más sencillo y fácil de mantener.</p>
<section id="expresiones-regulares">
<h4>Expresiones Regulares<a class="headerlink" href="#expresiones-regulares" title="Link to this heading">#</a></h4>
<p>Las expresiones regulares son una herramienta para validar campos de formulario, como números de teléfono, correos electrónicos, y otros patrones específicos.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;phone-number&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">button</span> <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;validate()&quot;</span><span class="p">&gt;</span>Validar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">validate</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">phoneNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;phone-number&#39;</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">phoneRGEX</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/</span><span class="p">;</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">phoneResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">phoneRGEX</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">phoneNumber</span><span class="p">);</span>
<span class="w">  </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;phone: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">phoneResult</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Ejercicio sobre formularios tradicionales vs con Javascript: <a class="reference external" href="https://jsfiddle.net/xxjcaxx/L2q8vzgn/10/">https://jsfiddle.net/xxjcaxx/L2q8vzgn/10/</a></p></li>
</ul>
</section>
<section id="validacion-y-estilo">
<h4>Validación y estilo<a class="headerlink" href="#validacion-y-estilo" title="Link to this heading">#</a></h4>
<p>En caso de que un campo no sea válido, se puede manipular las clases CSS o mostrar un mensaje de error. Aquí entra el tema de la usabilidad. Estamos muy acostumbrados a un comportamiento de los formularios que nos informe de si estamos haciendo las cosas bien. Por ejemplo: un <code class="docutils literal notranslate"><span class="pre">input</span></code> que no haya sido manipulado de momento, no debería mostrarse como erróneo. Pero si ya se ha escrito algo en él y saltamos de <code class="docutils literal notranslate"><span class="pre">input</span></code>, ya debería mostrarse como erróneo. Esto también puede ser farragoso y siempre es mejor separar por funciones puras la validación y la aplicación de estilos.</p>
</section>
</section>
<section id="ficheros-en-formularios">
<h3>Ficheros en formularios<a class="headerlink" href="#ficheros-en-formularios" title="Link to this heading">#</a></h3>
<p>Enviar ficheros al servidor mediante un formulario HTML es una tarea común que se realiza utilizando un <code class="docutils literal notranslate"><span class="pre">input</span></code> de tipo <code class="docutils literal notranslate"><span class="pre">file</span></code>. El tratamiento de los ficheros puede diferir del de otros elementos del formulario.</p>
<blockquote>
<div><p>Para entender mejor este apartado, también hay que dominar la comunicación <code class="docutils literal notranslate"><span class="pre">fetch</span></code> con el servidor que tratamos en el capítulo de comunicación con el servidor.</p>
</div></blockquote>
<section id="envio-de-ficheros-con-un-formulario-tradicional">
<h4>Envío de ficheros con un formulario tradicional<a class="headerlink" href="#envio-de-ficheros-con-un-formulario-tradicional" title="Link to this heading">#</a></h4>
<p>Para enviar un fichero en un formulario tradicional, simplemente se crea un <code class="docutils literal notranslate"><span class="pre">FormData</span></code> a partir del formulario y se envía utilizando un método HTTP como <code class="docutils literal notranslate"><span class="pre">POST</span></code>. Los formularios tradicionales aceptan binarios a través del MIME, lo cual facilita este proceso.</p>
<p>Aquí hay un ejemplo de cómo hacerlo:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;fileForm&quot;</span> <span class="na">enctype</span><span class="o">=</span><span class="s">&quot;multipart/form-data&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;file&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;file&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;fileInput&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="p">&gt;</span>Enviar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;fileForm&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">formData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="w">            </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/upload&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nx">formData</span>
<span class="w">            </span><span class="p">})</span>
<span class="w">            </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Error:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">));</span>
<span class="w">        </span><span class="p">});</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Se crea un formulario con <code class="docutils literal notranslate"><span class="pre">enctype=&quot;multipart/form-data&quot;</span></code> para manejar la subida de ficheros.</p></li>
<li><p>En el evento <code class="docutils literal notranslate"><span class="pre">submit</span></code> del formulario, se previene el comportamiento por defecto.</p></li>
<li><p>Se crea un objeto <code class="docutils literal notranslate"><span class="pre">FormData</span></code> a partir del formulario y se envía con <code class="docutils literal notranslate"><span class="pre">fetch</span></code> usando el método <code class="docutils literal notranslate"><span class="pre">POST</span></code>.</p></li>
</ul>
</section>
<section id="envio-de-ficheros-utilizando-json">
<h4>Envío de ficheros utilizando JSON<a class="headerlink" href="#envio-de-ficheros-utilizando-json" title="Link to this heading">#</a></h4>
<p>Si queremos enviar los datos con JSON, el proceso es un poco más complejo, ya que JSON no puede manejar binarios directamente. Para resolver esto, se puede convertir el fichero en una cadena en formato <code class="docutils literal notranslate"><span class="pre">Base64</span></code> antes de enviarlo.</p>
<p>Aquí hay un ejemplo de cómo hacerlo:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;fileForm&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;file&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;fileInput&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="p">&gt;</span>Enviar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;fileForm&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">fileInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;fileInput&#39;</span><span class="p">);</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fileInput</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FileReader</span><span class="p">();</span>

<span class="w">            </span><span class="nx">reader</span><span class="p">.</span><span class="nx">onloadend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">base64String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">reader</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;data:&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^.+,/</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">jsonData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">fileName</span><span class="o">:</span><span class="w"> </span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">fileType</span><span class="o">:</span><span class="w"> </span><span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">fileData</span><span class="o">:</span><span class="w"> </span><span class="nx">base64String</span>
<span class="w">                </span><span class="p">};</span>

<span class="w">                </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/upload-json&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;application/json&#39;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">)</span>
<span class="w">                </span><span class="p">})</span>
<span class="w">                </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Error:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">));</span>
<span class="w">            </span><span class="p">};</span>

<span class="w">            </span><span class="nx">reader</span><span class="p">.</span><span class="nx">readAsDataURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Se crea un formulario sin especificar <code class="docutils literal notranslate"><span class="pre">enctype</span></code>.</p></li>
<li><p>En el evento <code class="docutils literal notranslate"><span class="pre">submit</span></code>, se previene el comportamiento por defecto.</p></li>
<li><p>Se obtiene el fichero del input y se utiliza <code class="docutils literal notranslate"><span class="pre">FileReader</span></code> para leer el fichero como una URL de datos.</p></li>
<li><p>Se convierte la URL de datos en una cadena Base64.</p></li>
<li><p>Se crea un objeto JSON con el nombre, tipo y datos del fichero en Base64.</p></li>
<li><p>Se envía el objeto JSON utilizando <code class="docutils literal notranslate"><span class="pre">fetch</span></code> con el método <code class="docutils literal notranslate"><span class="pre">POST</span></code> y el encabezado <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> establecido como <code class="docutils literal notranslate"><span class="pre">application/json</span></code>.</p></li>
</ul>
<p>Algunos servicios como supabase aceptan que se les envíe los binarios con el método tradicional y los datos textuales en <code class="docutils literal notranslate"><span class="pre">JSON</span></code>, eso implica dos peticiones. En el apartado de <span class="xref std std-doc">../supabase.ipynb</span> hay ejemplos.</p>
</section>
<section id="validacion-de-ficheros">
<h4>Validación de ficheros<a class="headerlink" href="#validacion-de-ficheros" title="Link to this heading">#</a></h4>
<p>Los ficheros deben ser validados en el lado del servidor, pero nosotros también podemos validarlos en la parte de cliente para mejorar la usabilidad. Validar los ficheros en el lado del cliente mejora la usabilidad al proporcionar retroalimentación inmediata a los usuarios sobre cualquier problema con sus archivos antes de que intenten subirlos al servidor. Esto puede ahorrar tiempo y frustración tanto para el usuario como para el servidor.</p>
<p>Aquí hay un ejemplo completo que ilustra cómo realizar estas validaciones en un formulario HTML:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;fileForm&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;file&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;fileInput&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span><span class="p">&gt;</span>Enviar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;errorMessage&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;error&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;fileForm&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">fileInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;fileInput&#39;</span><span class="p">);</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fileInput</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">errorMessage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;errorMessage&#39;</span><span class="p">);</span>
<span class="w">            </span><span class="nx">errorMessage</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>

<span class="w">            </span><span class="c1">// Validación del tamaño del fichero (por ejemplo, 2MB máximo)</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">maxSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1024</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">1024</span><span class="p">;</span><span class="w"> </span><span class="c1">// 2MB</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">size</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">maxSize</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">errorMessage</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;El fichero es demasiado grande. El tamaño máximo es de 2MB.&#39;</span><span class="p">;</span>
<span class="w">                </span><span class="k">return</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// Validación del tipo de fichero</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">allowedTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;image/jpeg&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;image/gif&#39;</span><span class="p">];</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">allowedTypes</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">errorMessage</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Tipo de fichero no permitido. Solo se permiten imágenes (jpeg, png, gif).&#39;</span><span class="p">;</span>
<span class="w">                </span><span class="k">return</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// Validación del nombre del fichero (sin caracteres especiales)</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">regex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sr">/^[a-zA-Z0-9_\-\.]+$/</span><span class="p">;</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">regex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">errorMessage</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;El nombre del fichero contiene caracteres no permitidos.&#39;</span><span class="p">;</span>
<span class="w">                </span><span class="k">return</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// Si todas las validaciones son correctas, proceder a la subida del fichero</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FileReader</span><span class="p">();</span>
<span class="w">            </span><span class="nx">reader</span><span class="p">.</span><span class="nx">onloadend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">base64String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">reader</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;data:&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^.+,/</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">jsonData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">fileName</span><span class="o">:</span><span class="w"> </span><span class="nx">file</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">fileType</span><span class="o">:</span><span class="w"> </span><span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">fileData</span><span class="o">:</span><span class="w"> </span><span class="nx">base64String</span>
<span class="w">                </span><span class="p">};</span>

<span class="w">                </span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/upload-json&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
<span class="w">                    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;application/json&#39;</span>
<span class="w">                    </span><span class="p">},</span>
<span class="w">                    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">jsonData</span><span class="p">)</span>
<span class="w">                </span><span class="p">})</span>
<span class="w">                </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Error:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="p">));</span>
<span class="w">            </span><span class="p">};</span>

<span class="w">            </span><span class="nx">reader</span><span class="p">.</span><span class="nx">readAsDataURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
</pre></div>
</div>
</section>
<section id="imagenes-en-formularios">
<h4>Imágenes en formularios<a class="headerlink" href="#imagenes-en-formularios" title="Link to this heading">#</a></h4>
<p>Las imágenes son un tipo interesante de ficheros, ya que se pueden previsualizar.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">encodeFileAsURL</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">file</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">fileURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">URL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
<span class="w">                </span><span class="nx">callback</span><span class="p">(</span><span class="nx">fileURL</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;No file provided or file is invalid.&#39;</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kd">function</span><span class="w"> </span><span class="nx">handleFileInputChange</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="w"> </span><span class="nx">previewElementId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<span class="w">            </span><span class="nx">encodeFileAsURL</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">fileURL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">previewElementId</span><span class="p">).</span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fileURL</span><span class="p">;</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kd">function</span><span class="w"> </span><span class="nx">attachFileInputHandler</span><span class="p">(</span><span class="nx">inputElementId</span><span class="p">,</span><span class="w"> </span><span class="nx">previewElementId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">inputElementId</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">handleFileInputChange</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span><span class="w"> </span><span class="nx">previewElementId</span><span class="p">);</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Attach the handler for avatar file input</span>
<span class="w">        </span><span class="nx">attachFileInputHandler</span><span class="p">(</span><span class="s1">&#39;avatar&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;avatar_prev&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Puede que los usuarios envíen imágenes demasiado grandes. Si queremos reducir el tiempo de carga y el espacio en disco del servidor, las podemos reducir antes de enviar. El siguiente ejemplo recoge la imagen, la pone en un canvas virtual y vuelve a recuperar la imágen reducida para enviarla:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>   <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;file&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;imageInput&quot;</span> <span class="na">accept</span><span class="o">=</span><span class="s">&quot;image/*&quot;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">img</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;imagePreview&quot;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&quot;Previsualización de la imagen&quot;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;uploadButton&quot;</span><span class="p">&gt;</span>Subir Imagen<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">resizeImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">maxWidth</span><span class="p">,</span><span class="w"> </span><span class="nx">maxHeight</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span><span class="w"> </span><span class="nx">reject</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kd">const</span><span class="w"> </span><span class="nx">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FileReader</span><span class="p">();</span>
<span class="w">      </span><span class="nx">reader</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Image</span><span class="p">();</span>
<span class="w">        </span><span class="nx">img</span><span class="p">.</span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
<span class="w">        </span><span class="nx">img</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">canvas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">);</span>
<span class="w">          </span><span class="kd">let</span><span class="w"> </span><span class="nx">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">img</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
<span class="w">          </span><span class="kd">let</span><span class="w"> </span><span class="nx">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">img</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

<span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">width</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">height</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">width</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">maxWidth</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">height</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="nx">maxWidth</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">width</span><span class="p">;</span>
<span class="w">              </span><span class="nx">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">maxWidth</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">height</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">maxHeight</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">width</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="nx">maxHeight</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nx">height</span><span class="p">;</span>
<span class="w">              </span><span class="nx">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">maxHeight</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span>

<span class="w">          </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">width</span><span class="p">;</span>
<span class="w">          </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">height</span><span class="p">;</span>
<span class="w">          </span><span class="kd">const</span><span class="w"> </span><span class="nx">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
<span class="w">          </span><span class="nx">ctx</span><span class="p">.</span><span class="nx">drawImage</span><span class="p">(</span><span class="nx">img</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="p">);</span>

<span class="w">          </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">toBlob</span><span class="p">(</span><span class="nx">blob</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">blob</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">resolve</span><span class="p">(</span><span class="nx">blob</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">              </span><span class="nx">reject</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Error al redimensionar la imagen&#39;</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">          </span><span class="p">},</span><span class="w"> </span><span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">      </span><span class="p">});</span>
<span class="w">      </span><span class="nx">reader</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">reject</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">(</span><span class="s1">&#39;Error al leer el archivo&#39;</span><span class="p">)));</span>
<span class="w">      </span><span class="nx">reader</span><span class="p">.</span><span class="nx">readAsDataURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">};</span>
</pre></div>
</div>
</section>
<section id="otros-ficheros">
<h4>Otros ficheros<a class="headerlink" href="#otros-ficheros" title="Link to this heading">#</a></h4>
<p>Hay muchas cosas que se pueden hacer con otro tipo de ficheros antes de subirlos al servidor, o incluso sin subirlos nunca. Por ejemplo, se puede previsualizar el contenido de un fichero de texto:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">formFileInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fileForm</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;#formFile&quot;</span><span class="p">);</span>
<span class="nx">formFileInput</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;change&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">formFileInput</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FileReader</span><span class="p">();</span>
<span class="w">    </span><span class="nx">reader</span><span class="p">.</span><span class="nx">readAsText</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
<span class="w">    </span><span class="nx">reader</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;load&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">fileForm</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">&quot;#previewFile&quot;</span><span class="p">).</span><span class="nx">innerText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">reader</span><span class="p">.</span><span class="nx">result</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">});</span>
</pre></div>
</div>
<p>O incluso de un fichero PDF:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span> <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;divLogin&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;file&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;pdfInput&quot;</span> <span class="na">accept</span><span class="o">=</span><span class="s">&quot;application/pdf&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">embed</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;pdfPreview&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;application/pdf&quot;</span><span class="p">&gt;</span>
 <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">previewPDF</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">previewElementId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">file</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;application/pdf&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">fileURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">URL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
<span class="w">                </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">previewElementId</span><span class="p">).</span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fileURL</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;El archivo seleccionado no es un PDF.&#39;</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>También se puede, gracias a HTML5, reproducir un fichero de audio:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;file&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;audioInput&quot;</span> <span class="na">accept</span><span class="o">=</span><span class="s">&quot;audio/*&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">audio</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;audioPreview&quot;</span> <span class="na">controls</span><span class="p">&gt;</span>
            Tu navegador no soporta el elemento de audio.
        <span class="p">&lt;/</span><span class="nt">audio</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">previewAudio</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span><span class="w"> </span><span class="nx">previewElementId</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">file</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">file</span><span class="p">.</span><span class="nx">type</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s1">&#39;audio/&#39;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="kd">const</span><span class="w"> </span><span class="nx">fileURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">URL</span><span class="p">.</span><span class="nx">createObjectURL</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
<span class="w">                </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">previewElementId</span><span class="p">).</span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fileURL</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;El archivo seleccionado no es un audio válido.&#39;</span><span class="p">);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="el-objeto-file">
<h4>El Objeto <code class="docutils literal notranslate"><span class="pre">File</span></code><a class="headerlink" href="#el-objeto-file" title="Link to this heading">#</a></h4>
<p>Un objeto <code class="docutils literal notranslate"><span class="pre">File</span></code> en JavaScript representa un archivo que se ha seleccionado a través de un elemento <code class="docutils literal notranslate"><span class="pre">&lt;input</span> <span class="pre">type=&quot;file&quot;&gt;</span></code> o que se ha creado mediante la API de archivos. Este objeto hereda de <code class="docutils literal notranslate"><span class="pre">Blob</span></code> y, por lo tanto, tiene todos los atributos y métodos de un <code class="docutils literal notranslate"><span class="pre">Blob</span></code>, además de algunos atributos específicos para los archivos. Aquí tenemos una lista de los atributos principales del objeto <code class="docutils literal notranslate"><span class="pre">File</span></code> y su utilidad:</p>
<ol class="arabic simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">name</span></code></strong></p>
<ul class="simple">
<li><p><strong>Descripción</strong>: El nombre del archivo, incluido su extensión.</p></li>
<li><p><strong>Utilidad</strong>: Utilizado para mostrar o manipular el nombre del archivo. Por ejemplo, se puede mostrar al usuario el nombre del archivo que se ha seleccionado o utilizarlo para enviarlo al servidor.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">lastModified</span></code></strong></p>
<ul class="simple">
<li><p><strong>Descripción</strong>: El timestamp (en milisegundos desde el 1 de enero de 1970) de la última vez que el archivo fue modificado.</p></li>
<li><p><strong>Utilidad</strong>: Permite conocer la fecha y hora de la última modificación del archivo. Puede ser útil para sincronización, control de versiones o simplemente para mostrar esta información al usuario.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">lastModifiedDate</span></code></strong> (obsoleto, usar <code class="docutils literal notranslate"><span class="pre">lastModified</span></code> en su lugar)</p>
<ul class="simple">
<li><p><strong>Descripción</strong>: Un objeto <code class="docutils literal notranslate"><span class="pre">Date</span></code> que representa la fecha de la última modificación del archivo.</p></li>
<li><p><strong>Utilidad</strong>: Similar a <code class="docutils literal notranslate"><span class="pre">lastModified</span></code>, pero como un objeto <code class="docutils literal notranslate"><span class="pre">Date</span></code>. Este atributo está obsoleto y no se recomienda su uso.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">size</span></code></strong></p>
<ul class="simple">
<li><p><strong>Descripción</strong>: El tamaño del archivo en bytes.</p></li>
<li><p><strong>Utilidad</strong>: Permite conocer el tamaño del archivo. Es útil para validar si el archivo cumple con los requisitos de tamaño antes de subirlo o para mostrar esta información al usuario.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">type</span></code></strong></p>
<ul class="simple">
<li><p><strong>Descripción</strong>: El tipo MIME del archivo (por ejemplo, “image/png” o “application/pdf”).</p></li>
<li><p><strong>Utilidad</strong>: Utilizado para determinar el tipo de contenido del archivo. Esto es útil para validar el tipo de archivo que se ha seleccionado, para decidir cómo procesarlo o para enviarlo al servidor con el tipo correcto.</p></li>
</ul>
</li>
</ol>
<p>El objeto <code class="docutils literal notranslate"><span class="pre">File</span></code> también hereda todos los métodos de <code class="docutils literal notranslate"><span class="pre">Blob</span></code>, lo que permite manipular el contenido del archivo de varias maneras. Algunos de estos métodos incluyen:</p>
<ol class="arabic simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">slice([start[,</span> <span class="pre">end[,</span> <span class="pre">contentType]]])</span></code></strong></p>
<ul class="simple">
<li><p><strong>Descripción</strong>: Crea un nuevo <code class="docutils literal notranslate"><span class="pre">Blob</span></code> representando una porción del archivo original.</p></li>
<li><p><strong>Utilidad</strong>: Permite trabajar con una parte específica del archivo, lo cual puede ser útil para subir archivos en partes o para manipular solo una sección del archivo.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">text()</span></code></strong></p>
<ul class="simple">
<li><p><strong>Descripción</strong>: Devuelve una promesa que se resuelve con el contenido del <code class="docutils literal notranslate"><span class="pre">Blob</span></code> como una cadena de texto.</p></li>
<li><p><strong>Utilidad</strong>: Permite leer el contenido de un archivo como texto, lo que es útil para archivos de texto, CSV, JSON, etc.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">arrayBuffer()</span></code></strong></p>
<ul class="simple">
<li><p><strong>Descripción</strong>: Devuelve una promesa que se resuelve con el contenido del <code class="docutils literal notranslate"><span class="pre">Blob</span></code> como un <code class="docutils literal notranslate"><span class="pre">ArrayBuffer</span></code>.</p></li>
<li><p><strong>Utilidad</strong>: Útil para trabajar con datos binarios de bajo nivel.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">stream()</span></code></strong></p>
<ul class="simple">
<li><p><strong>Descripción</strong>: Devuelve un <code class="docutils literal notranslate"><span class="pre">ReadableStream</span></code> del contenido del <code class="docutils literal notranslate"><span class="pre">Blob</span></code>.</p></li>
<li><p><strong>Utilidad</strong>: Permite trabajar con el contenido del archivo como un flujo de datos, lo que puede ser útil para grandes archivos que necesitan ser procesados por partes.</p></li>
</ul>
</li>
</ol>
</section>
<section id="el-objeto-filereader">
<h4>El objeto <code class="docutils literal notranslate"><span class="pre">FileReader</span></code><a class="headerlink" href="#el-objeto-filereader" title="Link to this heading">#</a></h4>
<p>El objeto <code class="docutils literal notranslate"><span class="pre">FileReader</span></code> en JavaScript proporciona una forma de leer archivos de forma asíncrona desde el cliente, utilizando el API File de HTML5. Estos son los principales atributos y métodos del objeto <code class="docutils literal notranslate"><span class="pre">FileReader</span></code>:</p>
<ol class="arabic simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">readyState</span></code></strong>:</p>
<ul class="simple">
<li><p><strong>Descripción</strong>: Indica el estado actual de la operación de lectura del archivo.</p></li>
<li><p><strong>Valores posibles</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">EMPTY</span></code> (0): Objeto recién creado, sin archivo asignado.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LOADING</span></code> (1): Archivo está siendo leído.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DONE</span></code> (2): Lectura del archivo completada correctamente.</p></li>
</ul>
</li>
<li><p><strong>Uso</strong>: Puede ser útil para controlar el flujo de trabajo y saber cuándo ha finalizado la lectura del archivo.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">result</span></code></strong>:</p>
<ul class="simple">
<li><p><strong>Descripción</strong>: Contiene los datos del archivo leído, representados como una cadena de caracteres o como un <code class="docutils literal notranslate"><span class="pre">ArrayBuffer</span></code>, dependiendo del método utilizado para leer el archivo.</p></li>
<li><p><strong>Uso</strong>: Después de que la lectura del archivo sea exitosa, este atributo contiene los datos del archivo en el formato especificado.</p></li>
</ul>
</li>
</ol>
<p><strong>Métodos del objeto <code class="docutils literal notranslate"><span class="pre">FileReader</span></code></strong></p>
<ol class="arabic simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">readAsArrayBuffer(file)</span></code></strong>:</p>
<ul class="simple">
<li><p><strong>Descripción</strong>: Lee el contenido del archivo como un <code class="docutils literal notranslate"><span class="pre">ArrayBuffer</span></code>.</p></li>
<li><p><strong>Uso</strong>: Útil cuando se trabaja con datos binarios, como imágenes o archivos PDF.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">readAsBinaryString(file)</span></code></strong>:</p>
<ul class="simple">
<li><p><strong>Descripción</strong>: Lee el contenido del archivo como una cadena binaria (<code class="docutils literal notranslate"><span class="pre">String</span></code>).</p></li>
<li><p><strong>Uso</strong>: Aunque está en desuso, puede ser útil para leer archivos en formatos antiguos que no son compatibles con <code class="docutils literal notranslate"><span class="pre">readAsText</span></code>.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">readAsDataURL(file)</span></code></strong>:</p>
<ul class="simple">
<li><p><strong>Descripción</strong>: Lee el contenido del archivo y devuelve una URL de datos (<code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">URL</span></code>) que representa los datos del archivo.</p></li>
<li><p><strong>Uso</strong>: Muy común para leer imágenes y otros tipos de archivos que pueden ser representados como URLs de datos en el navegador.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">readAsText(file,</span> <span class="pre">encoding)</span></code></strong>:</p>
<ul class="simple">
<li><p><strong>Descripción</strong>: Lee el contenido del archivo como texto (<code class="docutils literal notranslate"><span class="pre">String</span></code>), utilizando una codificación opcional.</p></li>
<li><p><strong>Uso</strong>: Ideal para archivos de texto como archivos de configuración o documentos de texto plano.</p></li>
</ul>
</li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">abort()</span></code></strong>:</p>
<ul class="simple">
<li><p><strong>Descripción</strong>: Cancela la operación de lectura del archivo en curso.</p></li>
<li><p><strong>Uso</strong>: Útil si se desea interrumpir la lectura de un archivo antes de que se complete, por ejemplo, en respuesta a una acción del usuario.</p></li>
</ul>
</li>
</ol>
<ul class="simple">
<li><p><strong>Asincronía</strong>: Todas las operaciones de lectura del <code class="docutils literal notranslate"><span class="pre">FileReader</span></code> son asíncronas, lo que significa que se debe manejar el resultado (o error) en los callbacks adecuados (<code class="docutils literal notranslate"><span class="pre">onload</span></code>, <code class="docutils literal notranslate"><span class="pre">onerror</span></code>).</p></li>
<li><p><strong>Seguridad</strong>: Debido a las políticas de seguridad del navegador, la lectura de archivos locales puede estar limitada. Es importante entender y respetar estas limitaciones al desarrollar aplicaciones web que interactúan con archivos del cliente.</p></li>
</ul>
</section>
</section>
</section>
<section id="eventos-y-handlers">
<h2>Eventos y Handlers<a class="headerlink" href="#eventos-y-handlers" title="Link to this heading">#</a></h2>
<p>Los eventos y los manejadores (handlers) son elementos para capturar interacciones del usuario y realizar acciones en respuesta a estas interacciones.</p>
<p>Los eventos en JavaScript permiten capturar desde movimientos del mouse hasta pulsaciones de teclado y manipular el contenido y comportamiento de la página en respuesta a estas interacciones.</p>
<section id="eventos-events">
<h3>Eventos (Events)<a class="headerlink" href="#eventos-events" title="Link to this heading">#</a></h3>
<p>Los eventos son mecanismos que se activan cuando el usuario interactúa con la página web. Estas interacciones pueden ser clics del ratón, pulsaciones de teclado, desplazamientos, cambios en el tamaño de la ventana, etc. Los eventos permiten que JavaScript responda dinámicamente a las acciones del usuario.</p>
<p><strong>Características principales:</strong></p>
<ul class="simple">
<li><p>Son disparados por el navegador o por el usuario.</p></li>
<li><p>Pueden estar relacionados con elementos específicos del DOM, como un botón o un campo de entrada.</p></li>
<li><p>El objeto <code class="docutils literal notranslate"><span class="pre">Event</span></code> contiene información detallada sobre el evento que ocurrió, como qué elemento lo originó y detalles específicos del tipo de evento.</p></li>
</ul>
</section>
<section id="manejadores-handlers">
<h3>Manejadores (Handlers)<a class="headerlink" href="#manejadores-handlers" title="Link to this heading">#</a></h3>
<p>Un manejador, o handler en inglés, es una función que se ejecuta cuando ocurre un evento específico. Cada tipo de evento (como <code class="docutils literal notranslate"><span class="pre">click</span></code>, <code class="docutils literal notranslate"><span class="pre">submit</span></code>, <code class="docutils literal notranslate"><span class="pre">mouseover</span></code>, etc.) puede tener asociado un manejador que define qué acción debe realizarse en respuesta al evento.</p>
<p><strong>Características principales:</strong></p>
<ul class="simple">
<li><p>Es una función que se asigna a un evento particular en un elemento del DOM.</p></li>
<li><p>Define la acción o comportamiento que se debe llevar a cabo cuando el evento ocurre.</p></li>
<li><p>Los manejadores pueden ser definidos directamente en el HTML, usando atributos como <code class="docutils literal notranslate"><span class="pre">onclick</span></code>, o pueden ser asignados dinámicamente desde JavaScript.</p></li>
</ul>
</section>
<section id="ejemplo-de-uso-en-html-y-javascript">
<h3>Ejemplo de uso en HTML y JavaScript<a class="headerlink" href="#ejemplo-de-uso-en-html-y-javascript" title="Link to this heading">#</a></h3>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;es&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Eventos y Manejadores<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;myButton&quot;</span><span class="p">&gt;</span>Haz clic aquí<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;script.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Obtener referencia al botón</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">button</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;myButton&#39;</span><span class="p">);</span>

<span class="c1">// Definir el manejador para el evento &#39;click&#39;</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;¡Se hizo clic en el botón!&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Detalles del evento:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Asignar el manejador al evento &#39;click&#39; del botón</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">handleClick</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="eventos-en-linea">
<h3>Eventos en línea<a class="headerlink" href="#eventos-en-linea" title="Link to this heading">#</a></h3>
<section id="ejemplo-en-html-no-recomendable">
<h4>Ejemplo en HTML (No recomendable)<a class="headerlink" href="#ejemplo-en-html-no-recomendable" title="Link to this heading">#</a></h4>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">p</span> <span class="na">onmouseover</span><span class="o">=</span><span class="s">&quot;this.style.background=&#39;#FF0000&#39;;&quot;</span> <span class="na">onmouseout</span><span class="o">=</span><span class="s">&quot;this.style.background=&#39;#FFFFFF&#39;;&quot;</span><span class="p">&gt;</span>HOLA<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Este método incrusta el código JavaScript directamente en el atributo <code class="docutils literal notranslate"><span class="pre">onmouseover</span></code> y <code class="docutils literal notranslate"><span class="pre">onmouseout</span></code> del elemento <code class="docutils literal notranslate"><span class="pre">&lt;p&gt;</span></code>. Aunque es simple, no se recomienda porque mezcla lógica de presentación con el contenido y dificulta el mantenimiento.</p>
</section>
</section>
<section id="registro-tradicional-de-eventos">
<h3>Registro tradicional de eventos<a class="headerlink" href="#registro-tradicional-de-eventos" title="Link to this heading">#</a></h3>
<p>Para manejar eventos de manera más estructurada y mantenible, se utiliza el método tradicional de registrar eventos en JavaScript:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">window</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;hola&#39;</span><span class="p">).</span><span class="nx">onmouseover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;#FF0000&#39;</span><span class="p">;</span>
<span class="w">   </span><span class="p">};</span>
<span class="w">   </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;hola&#39;</span><span class="p">).</span><span class="nx">onmouseout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;#FFFFFF&#39;</span><span class="p">;</span>
<span class="w">   </span><span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Aquí, se espera a que la ventana y todos los recursos se carguen completamente (<code class="docutils literal notranslate"><span class="pre">window.onload</span></code>) antes de asignar los manejadores de eventos <code class="docutils literal notranslate"><span class="pre">onmouseover</span></code> y <code class="docutils literal notranslate"><span class="pre">onmouseout</span></code> al elemento con id <code class="docutils literal notranslate"><span class="pre">hola</span></code>. Sin embargo, esta técnica tiene limitaciones, como la incapacidad de asignar múltiples manejadores a un mismo evento.</p>
</section>
<section id="registro-avanzado-de-eventos">
<h3>Registro avanzado de eventos<a class="headerlink" href="#registro-avanzado-de-eventos" title="Link to this heading">#</a></h3>
<p>El método recomendado para registrar eventos es usando <code class="docutils literal notranslate"><span class="pre">addEventListener</span></code>, que ofrece más flexibilidad y mejores prácticas:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
<span class="w">   </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;hola&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;#FF0000&#39;</span><span class="p">;</span>
<span class="w">       </span><span class="p">},</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>
<span class="w">       </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;hola&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseout&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;#FFFFFF&#39;</span><span class="p">;</span>
<span class="w">       </span><span class="p">},</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>
<span class="w">   </span><span class="p">});</span>
<span class="p">})();</span>
</pre></div>
</div>
<p>Aquí, <code class="docutils literal notranslate"><span class="pre">addEventListener</span></code> permite agregar múltiples manejadores para el mismo evento, separando la lógica de la presentación del HTML.</p>
</section>
<section id="obtencion-de-informacion-del-evento">
<h3>Obtención de información del evento<a class="headerlink" href="#obtencion-de-informacion-del-evento" title="Link to this heading">#</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
<span class="w">   </span><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;hola&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">manejador</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>
<span class="w">       </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;hola&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseout&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">manejador</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>
<span class="w">   </span><span class="p">});</span>

<span class="w">   </span><span class="kd">function</span><span class="w"> </span><span class="nx">manejador</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">       </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
<span class="w">       </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;mouseover&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;#FF0000&#39;</span><span class="p">;</span>
<span class="w">       </span><span class="p">}</span>
<span class="w">       </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;mouseout&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;#FFFFFF&#39;</span><span class="p">;</span>
<span class="w">       </span><span class="p">}</span>
<span class="w">       </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">id</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hola&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;¡Hola!&#39;</span><span class="p">);</span>
<span class="w">       </span><span class="p">}</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">})();</span>
</pre></div>
</div>
<p>En este ejemplo, <code class="docutils literal notranslate"><span class="pre">manejador</span></code> es una función que maneja tanto el evento <code class="docutils literal notranslate"><span class="pre">mouseover</span></code> como <code class="docutils literal notranslate"><span class="pre">mouseout</span></code>. Utiliza el objeto <code class="docutils literal notranslate"><span class="pre">Event</span></code> para obtener información sobre el tipo de evento (<code class="docutils literal notranslate"><span class="pre">e.type</span></code>) y el objetivo del evento (<code class="docutils literal notranslate"><span class="pre">e.target</span></code>), que es el elemento que disparó el evento.</p>
</section>
<section id="propagacion-y-captura-de-eventos">
<h3>Propagación y captura de eventos<a class="headerlink" href="#propagacion-y-captura-de-eventos" title="Link to this heading">#</a></h3>
<p>Los eventos se propagan desde el elemento que los desencadena hacia sus elementos padre. Se puede capturar un evento durante esta propagación y realizar acciones diferentes según el elemento específico que lo desencadenó. Para detener la propagación de un evento a elementos padre, se usa <code class="docutils literal notranslate"><span class="pre">event.stopPropagation()</span></code>.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;padre&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;hijo&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;boton&quot;</span><span class="p">&gt;</span>Haz clic aquí<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;boton&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Haz clic en el botón hijo&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span><span class="w"> </span><span class="c1">// Detiene la propagación del evento hacia arriba</span>
<span class="p">});</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;hijo&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Haz clic en el div hijo&#39;</span><span class="p">);</span>
<span class="p">});</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;padre&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Haz clic en el div padre&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>La propagación de eventos permite que los eventos desencadenados en elementos hijos se propaguen hacia sus elementos padres. Esta característica es muy útil para enviar datos desde elementos hijos a sus elementos padres mediante eventos personalizados y es fundamental en el funcionamiento de los componentes en varios frameworks de JavaScript como React, Vue.js y Angular.</p>
<p>La propagación de eventos tiene dos fases principales:</p>
<ol class="arabic simple">
<li><p><strong>Capturing Phase</strong>: La fase en la que el evento se propaga desde el documento raíz hasta el objetivo del evento.</p></li>
<li><p><strong>Bubbling Phase</strong>: La fase en la que el evento se propaga desde el objetivo del evento hacia el documento raíz.</p></li>
</ol>
<section id="enviar-datos-de-hijos-a-padres-con-eventos-personalizados">
<h4>Enviar Datos de Hijos a Padres con Eventos Personalizados<a class="headerlink" href="#enviar-datos-de-hijos-a-padres-con-eventos-personalizados" title="Link to this heading">#</a></h4>
<p>Los eventos personalizados se pueden utilizar para comunicar datos desde un componente hijo a un componente padre. A continuación se muestra un ejemplo de cómo se puede lograr esto en un entorno sin frameworks, utilizando la propagación de eventos del DOM:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Custom Event Example<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;parent&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">        </span><span class="c1">// Crear el elemento hijo</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">child</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;button&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="nx">child</span><span class="p">.</span><span class="nx">textContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Click me&#39;</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// Crear el elemento padre</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;parent&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="nx">parent</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Añadir un evento personalizado al hijo</span>
<span class="w">        </span><span class="nx">child</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">customEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CustomEvent</span><span class="p">(</span><span class="s1">&#39;childEvent&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">                </span><span class="nx">bubbles</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">  </span><span class="c1">// para que se propague</span>
<span class="w">                </span><span class="nx">detail</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Hello from child&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="w">            </span><span class="p">});</span>
<span class="w">            </span><span class="nx">child</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">customEvent</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>

<span class="w">        </span><span class="c1">// Añadir un listener en el padre para capturar el evento del hijo</span>
<span class="w">        </span><span class="nx">parent</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;childEvent&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">            </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Received message from child:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>En este ejemplo:</p>
<ol class="arabic simple">
<li><p><strong>Elemento hijo (<code class="docutils literal notranslate"><span class="pre">child</span></code>)</strong>: Cuando se hace clic en el botón, se dispara un evento personalizado <code class="docutils literal notranslate"><span class="pre">childEvent</span></code> con algunos datos en la propiedad <code class="docutils literal notranslate"><span class="pre">detail</span></code>.</p></li>
<li><p><strong>Elemento padre (<code class="docutils literal notranslate"><span class="pre">parent</span></code>)</strong>: El padre escucha el evento <code class="docutils literal notranslate"><span class="pre">childEvent</span></code> y maneja los datos recibidos del hijo.</p></li>
</ol>
<p>En <strong>React</strong>, los datos de un componente hijo se envían a un componente padre mediante la elevación del estado y callbacks, en lugar de utilizar directamente la propagación de eventos del DOM.</p>
<p>En <strong>Vue.js</strong>, la comunicación de hijos a padres se realiza mediante la emisión de eventos personalizados.</p>
<p><strong>Angular</strong> También proporciona <code class="docutils literal notranslate"><span class="pre">&#64;Output</span></code> que crea un evento que es capturado por el componente padre.</p>
<ul class="simple">
<li><p>Ejercicio de eventos y propagación: <a class="reference external" href="https://jsfiddle.net/xxjcaxx/wep0c2j9/1/">https://jsfiddle.net/xxjcaxx/wep0c2j9/1/</a></p></li>
</ul>
</section>
</section>
<section id="eventos-de-teclado">
<h3>Eventos de teclado<a class="headerlink" href="#eventos-de-teclado" title="Link to this heading">#</a></h3>
<p>Los eventos de teclado (<code class="docutils literal notranslate"><span class="pre">KeyboardEvent</span></code>) permiten capturar las pulsaciones de teclas y actuar en consecuencia. Se puede obtener el código de la tecla presionada usando <code class="docutils literal notranslate"><span class="pre">event.code</span></code>, lo que proporciona una manera estandarizada de identificar cada tecla.
Aquí hay ejemplo sencillo que muestra cómo capturar eventos de teclado y obtener el código de la tecla presionada usando <code class="docutils literal notranslate"><span class="pre">event.code</span></code>:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;inputTexto&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Escribe algo aquí...&quot;</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;inputTexto&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Tecla presionada:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
</section>
<section id="notas-finales">
<h2>Notas finales<a class="headerlink" href="#notas-finales" title="Link to this heading">#</a></h2>
<p>Cuando programamos para el Frontend, la manera de tratar el DOM es muy diversa. Si distinguimos entre una SPA y una web generada en el servidor con algo de Javascript, las técnicas son muy diferentes. En el caso de la SPA, es muy importante tener claro una arquitectura MVC o similar en la que unas plantillas se rellenen con los datos del servidor. La interactividad y el manejo de formularios se suele implementar toda en Javascript porque préviamente no havia nada de HTML. En una web más tradicional en la que el HTML ya está generado por el servidor, es importante saber buscar nodos y manipularlos sin romper la estructura previa.
Por otro lado, está el Javascript enfocado a la parte visual: controlar el scroll, drag &amp; drop, animaciones… En este tema se han puesto las bases, pero eso requiere un estudio por separado. Esta parte puede ser explorada más profundamente en el módulo de Diseño de Interfaces.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "deno"
        },
        kernelOptions: {
            name: "deno",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'deno'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="arraysobjetosclases.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Arrays Objetos y clases</p>
      </div>
    </a>
    <a class="right-next"
       href="iteradores.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Iteradores</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dom-en-javascript">DOM en JavaScript</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#estructura-del-documento-html">Estructura del Documento HTML</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dom-window">DOM: Window</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dom-buscar-nodos">DOM: Buscar Nodos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dom-modificar-nodos">DOM: Modificar Nodos</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#atributos">Atributos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#propiedades">Propiedades</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dom-estilos">DOM: Estilos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creacion-de-elementos-plantillas">Creación de elementos (plantillas)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creacion-de-elementos-template-literal">Creación de Elementos: Template Literal</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creacion-de-elementos-mediante-tagged-template-literals">Creación de elementos mediante Tagged Template Literals</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creacion-de-elementos-interpolaciones-wrapper-fragments">Creación de Elementos: Interpolaciones, Wrapper, fragments</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creacion-de-elementos-con-template">Creación de elementos con <code class="docutils literal notranslate"><span class="pre">&lt;template&gt;</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#esperar-a-que-cargue-el-dom">Esperar a que Cargue el DOM</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#atributos-de-datos">Atributos de Datos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#formularios-en-javascript">Formularios en JavaScript</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#atributos-de-formularios">Atributos de Formularios</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ciclo-tradicional-del-formulario">Ciclo Tradicional del Formulario</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ciclo-del-formulario-con-javascript">Ciclo del Formulario con JavaScript</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-de-interceptar-submit-con-javascript">Ejemplo de Interceptar Submit con JavaScript</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#enviar-formulario-por-javascript">Enviar Formulario por JavaScript</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-de-envio-por-javascript">Ejemplo de Envío por JavaScript</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#validacion-de-formularios">Validación de formularios</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#expresiones-regulares">Expresiones Regulares</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#validacion-y-estilo">Validación y estilo</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ficheros-en-formularios">Ficheros en formularios</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#envio-de-ficheros-con-un-formulario-tradicional">Envío de ficheros con un formulario tradicional</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#envio-de-ficheros-utilizando-json">Envío de ficheros utilizando JSON</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#validacion-de-ficheros">Validación de ficheros</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#imagenes-en-formularios">Imágenes en formularios</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#otros-ficheros">Otros ficheros</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#el-objeto-file">El Objeto <code class="docutils literal notranslate"><span class="pre">File</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#el-objeto-filereader">El objeto <code class="docutils literal notranslate"><span class="pre">FileReader</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eventos-y-handlers">Eventos y Handlers</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eventos-events">Eventos (Events)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manejadores-handlers">Manejadores (Handlers)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-de-uso-en-html-y-javascript">Ejemplo de uso en HTML y JavaScript</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eventos-en-linea">Eventos en línea</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-en-html-no-recomendable">Ejemplo en HTML (No recomendable)</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#registro-tradicional-de-eventos">Registro tradicional de eventos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#registro-avanzado-de-eventos">Registro avanzado de eventos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#obtencion-de-informacion-del-evento">Obtención de información del evento</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#propagacion-y-captura-de-eventos">Propagación y captura de eventos</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#enviar-datos-de-hijos-a-padres-con-eventos-personalizados">Enviar Datos de Hijos a Padres con Eventos Personalizados</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eventos-de-teclado">Eventos de teclado</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#notas-finales">Notas finales</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jose Castillo
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>