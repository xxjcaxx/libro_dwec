
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Integraci√≥n y Despliegue Continuo (CI/CD) &#8212; Libro DWEC</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=dd2cc81e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ci-cd';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Proyectos en Javascript" href="proyectos.html" />
    <link rel="prev" title="Vite (Dev Server)" href="vite.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Libro DWEC - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Libro DWEC - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Libro DWEC
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Javascript</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="lenguajejavascript.html">El lenguaje Javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="arraysobjetosclases.html">Arrays Objetos y clases</a></li>
<li class="toctree-l1"><a class="reference internal" href="dom.html">DOM</a></li>
<li class="toctree-l1"><a class="reference internal" href="iteradores.html">Iteradores</a></li>
<li class="toctree-l1"><a class="reference internal" href="modulos.html">M√≥dulos</a></li>
<li class="toctree-l1"><a class="reference internal" href="promesas.html">Promesas</a></li>
<li class="toctree-l1"><a class="reference internal" href="ajax.html">Comunicaci√≥n con el servidor</a></li>
<li class="toctree-l1"><a class="reference internal" href="supabase.html">Supabase: (Backend como Servicio)</a></li>
<li class="toctree-l1"><a class="reference internal" href="npm.html">NPM</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="programacionfuncionalreactiva.html">Programaci√≥n Funcional, As√≠ncrona y Reactiva en JavaScript</a></li>

<li class="toctree-l1"><a class="reference internal" href="errores.html">Gesti√≥n de Errores</a></li>
<li class="toctree-l1"><a class="reference internal" href="webworkers.html">Web Workers</a></li>
<li class="toctree-l1"><a class="reference internal" href="vite.html">Vite (Dev Server)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Integraci√≥n y Despliegue Continuo (CI/CD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="proyectos.html">Proyectos en Javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentacion.html">Documentaci√≥n en JavaScript</a></li>
<li class="toctree-l1"><a class="reference internal" href="proyectovanilla.html">Proyecto completo en Javascript</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Angular</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="typescript.html">Typescript</a></li>
<li class="toctree-l1"><a class="reference internal" href="angular.html">Introducci√≥n a Angular</a></li>
<li class="toctree-l1"><a class="reference internal" href="httpangular.html">Comunicaci√≥n con el servidor en Angular</a></li>
<li class="toctree-l1"><a class="reference internal" href="rutasangular.html">Rutas en Angular</a></li>
<li class="toctree-l1"><a class="reference internal" href="formulariosangular.html">Formularios en Angular</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/xxjcaxx/libro_dwec/tree/master" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/xxjcaxx/libro_dwec/tree/master/issues/new?title=Issue%20on%20page%20%2Fci-cd.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/ci-cd.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Integraci√≥n y Despliegue Continuo (CI/CD)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pasos-tipicos-en-el-desarrollo-web">Pasos T√≠picos en el Desarrollo Web</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deta">Deta</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-1-alta-en-deta-y-configuracion-inicial">Paso 1: Alta en Deta y Configuraci√≥n Inicial</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-2-configuracion-del-spacefile">Paso 2: Configuraci√≥n del Spacefile</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-3-crear-el-proyecto-con-vite">Paso 3: Crear el Proyecto con Vite</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-4-despliegue-en-deta">Paso 4: Despliegue en Deta</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-5-acceso-y-gestion-de-la-aplicacion">Paso 5: Acceso y Gesti√≥n de la Aplicaci√≥n</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linting-y-formatting">Linting y Formatting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-testing">Unit Testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#instalar-los-tests">Instalar los tests</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configurar-los-tests-en-github-actions">Configurar los tests en GitHub Actions</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#integration-tests">Integration Tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#end-2-end-testing">End 2 End Testing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-and-deploy">Build and Deploy</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="integracion-y-despliegue-continuo-ci-cd">
<h1>Integraci√≥n y Despliegue Continuo (CI/CD)<a class="headerlink" href="#integracion-y-despliegue-continuo-ci-cd" title="Link to this heading">#</a></h1>
<p>El m√≥dulo DWEC se centra en la creaci√≥n de p√°ginas web en el lado del cliente. Este enfoque implica, en su mayor√≠a, la programaci√≥n en JavaScript para interactuar din√°micamente con el navegador y proporcionar una mejor experiencia de usuario. Sin embargo, el desarrollo web moderno abarca m√°s que simplemente escribir c√≥digo JavaScript.</p>
<p>Para abordar la complejidad y las m√∫ltiples etapas involucradas en el desarrollo y despliegue de una aplicaci√≥n web, as√≠ como para mejorar la calidad del software resultante, se recurre a los procesos de Integraci√≥n Continua y Despliegue Continuo (CI/CD). Estos procesos permiten automatizar y estandarizar muchas tareas asociadas con el desarrollo de software, desde la escritura de c√≥digo hasta la entrega al usuario final.</p>
<section id="pasos-tipicos-en-el-desarrollo-web">
<h2>Pasos T√≠picos en el Desarrollo Web<a class="headerlink" href="#pasos-tipicos-en-el-desarrollo-web" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p><strong>Crear el proyecto:</strong> Iniciar un nuevo proyecto web utilizando herramientas como npm, lo que establece la estructura inicial del proyecto y crea el archivo <code class="docutils literal notranslate"><span class="pre">package.json</span></code> que contiene la informaci√≥n del proyecto y sus dependencias.</p></li>
<li><p><strong>Instalar dependencias:</strong> Utilizar npm o yarn para instalar las dependencias necesarias para el desarrollo del proyecto, tanto las dependencias de desarrollo (por ejemplo, herramientas de construcci√≥n, linters, pruebas) como las dependencias espec√≠ficas del proyecto (por ejemplo, frameworks o librer√≠as JavaScript).</p></li>
<li><p><strong>Instalar y configurar frameworks o librer√≠as:</strong> Instalar y configurar cualquier framework o librer√≠a adicional necesaria para el desarrollo de la aplicaci√≥n web, como React, Vue.js o Angular, junto con cualquier complemento o biblioteca asociada.</p></li>
<li><p><strong>Escribir c√≥digo correcto:</strong> Desarrollar el c√≥digo de la aplicaci√≥n web siguiendo las mejores pr√°cticas y est√°ndares de codificaci√≥n, lo que implica escribir c√≥digo limpio, modular y mantenible que cumpla con los requisitos del proyecto.</p></li>
<li><p><strong>Utilizar linters:</strong> Configurar y utilizar linters como ESLint para asegurar que el c√≥digo JavaScript cumpla con las convenciones de estilo y las reglas de calidad definidas, ayudando a detectar y corregir errores, as√≠ como a mantener la coherencia en el c√≥digo base.</p></li>
<li><p><strong>Escribir pruebas (Test-Driven Development - TDD):</strong> Implementar pruebas unitarias y de integraci√≥n para validar el comportamiento del c√≥digo y garantizar su correcto funcionamiento, utilizando el enfoque de desarrollo guiado por pruebas (TDD) para mejorar la calidad del software y su mantenibilidad.</p></li>
<li><p><strong>Crear el repositorio git y gestionarlo:</strong> Inicializar un repositorio git para controlar el historial de cambios en el c√≥digo fuente y facilitar la colaboraci√≥n entre miembros del equipo, utilizando comandos git para crear commits, ramas y fusiones seg√∫n sea necesario.</p></li>
<li><p><strong>Realizar pruebas de integraci√≥n:</strong> Ejecutar pruebas de integraci√≥n para asegurar que los diferentes componentes de la aplicaci√≥n funcionen correctamente juntos y que no se produzcan conflictos o errores de interoperabilidad.</p></li>
<li><p><strong>Crear el bundle:</strong> Utilizar herramientas de construcci√≥n como Vite, Webpack o Parcel para crear un bundle optimizado de los activos de la aplicaci√≥n, incluidos los archivos HTML, CSS, JavaScript y recursos est√°ticos.</p></li>
<li><p><strong>Configurar el servidor:</strong> Configurar un servidor web para servir los archivos est√°ticos de la aplicaci√≥n y manejar solicitudes HTTP, lo que puede incluir la configuraci√≥n de servidores locales para desarrollo y pruebas, as√≠ como la configuraci√≥n de servidores de producci√≥n para el despliegue.</p></li>
<li><p><strong>Subir los archivos est√°ticos al servidor:</strong> Transferir los archivos est√°ticos resultantes del proceso de construcci√≥n (bundle) al servidor de producci√≥n o a un entorno de pruebas, lo que puede implicar la implementaci√≥n manual o automatizada de los archivos en el servidor remoto.</p></li>
<li><p><strong>Poner en producci√≥n:</strong> Realizar pruebas finales en el entorno de producci√≥n para asegurarse de que la aplicaci√≥n web funcione como se espera y, si todo est√° correcto, lanzarla para que los usuarios finales la utilicen.</p></li>
</ol>
<p>Como se puede ver, es muy dif√≠cil que los programadores lo hagan todo bien todo el tiempo. La parte del despliegue se trata con m√°s profundidad en el m√≥dulo de despliegue del ciclo, pero es preciso desplegar rudimentariamente o en alguna plataforma alternativa que simplifique esta tarea. De esta manera se puede ver todo el proceso sin perder demasiado tiempo. Una buena idea puede ser desplegar en Deta, como explico en este manual: Prototipo de proyecto con JS, Bootstrap, Vite, Deta y Supabase.</p>
<p>En este manual vamos a explorar algunas t√©cnicas para implementar el CI/CD en clase.</p>
</section>
<section id="deta">
<h2>Deta<a class="headerlink" href="#deta" title="Link to this heading">#</a></h2>
<p>Deta es una plataforma que permite desplegar y gestionar aplicaciones web de manera sencilla. Este manual tratas el proceso de alta en Deta, la creaci√≥n de un proyecto con Vite y el despliegue de tu aplicaci√≥n en la nube utilizando Deta.</p>
<section id="paso-1-alta-en-deta-y-configuracion-inicial">
<h3>Paso 1: Alta en Deta y Configuraci√≥n Inicial<a class="headerlink" href="#paso-1-alta-en-deta-y-configuracion-inicial" title="Link to this heading">#</a></h3>
<p>Para comenzar, debes registrarte en Deta y obtener un token. Luego, sigue estos pasos para instalar y configurar la CLI de Deta.</p>
<ol class="arabic simple">
<li><p><strong>Instala la CLI de Deta:</strong></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://get.deta.dev/space-cli.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>sh
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Inicia sesi√≥n en Deta:</strong></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>space<span class="w"> </span>login
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Crea un nuevo proyecto:</strong></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>space<span class="w"> </span>new
</pre></div>
</div>
<p>En caso de ya tener un proyecto, se puede enlazar, para ello hay que copiar el ID del proyecto y poner en la terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>space<span class="w"> </span>link
</pre></div>
</div>
</section>
<section id="paso-2-configuracion-del-spacefile">
<h3>Paso 2: Configuraci√≥n del Spacefile<a class="headerlink" href="#paso-2-configuracion-del-spacefile" title="Link to this heading">#</a></h3>
<p>El archivo principal de configuraci√≥n en Deta es el <code class="docutils literal notranslate"><span class="pre">Spacefile</span></code>. Este archivo define las distintas partes funcionales de tu aplicaci√≥n web. Vamos a empezar con un frontend m√≠nimo creado con Vite.</p>
<p>Crea un archivo llamado <code class="docutils literal notranslate"><span class="pre">Spacefile</span></code> en la ra√≠z de tu proyecto con el siguiente contenido:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">v</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">micros</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
<span class="w">    </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./proyecto</span>
<span class="w">    </span><span class="nt">engine</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">static</span>
<span class="w">    </span><span class="nt">primary</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">commands</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm run build</span>
<span class="w">    </span><span class="nt">serve</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dist</span>
<span class="w">    </span><span class="nt">dev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm run dev -- --port $PORT</span>
</pre></div>
</div>
<p>En este archivo:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: Nombre del microservicio.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code>: Directorio del proyecto.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">engine</span></code>: Tipo de motor (en este caso, <code class="docutils literal notranslate"><span class="pre">static</span></code> para un frontend est√°tico).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">primary</span></code>: Indica que este es el servicio principal.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">commands</span></code>: Comandos a ejecutar para construir el proyecto.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">serve</span></code>: Directorio a servir una vez construido el proyecto.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dev</span></code>: Comando de desarrollo.</p></li>
</ul>
<p>El frontend estar√° en la carpeta <code class="docutils literal notranslate"><span class="pre">proyecto</span></code> y, para ponerlo en producci√≥n, se ejecutar√° <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">build</span></code>, que es el comando necesario para Vite.</p>
</section>
<section id="paso-3-crear-el-proyecto-con-vite">
<h3>Paso 3: Crear el Proyecto con Vite<a class="headerlink" href="#paso-3-crear-el-proyecto-con-vite" title="Link to this heading">#</a></h3>
<p>Para crear un nuevo proyecto con Vite, ejecuta los siguientes comandos:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>create<span class="w"> </span>vite@latest<span class="w"> </span>proyecto
<span class="nb">cd</span><span class="w"> </span>proyecto
npm<span class="w"> </span>install
</pre></div>
</div>
<p>Configura tu proyecto seg√∫n tus necesidades, asegur√°ndote de que el comando <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">build</span></code> est√© listo para construir el proyecto.</p>
</section>
<section id="paso-4-despliegue-en-deta">
<h3>Paso 4: Despliegue en Deta<a class="headerlink" href="#paso-4-despliegue-en-deta" title="Link to this heading">#</a></h3>
<p>Una vez configurado el proyecto y el <code class="docutils literal notranslate"><span class="pre">Spacefile</span></code>, es momento de desplegar la aplicaci√≥n en la nube.</p>
<ol class="arabic">
<li><p><strong>Ejecuta el servidor de desarrollo de Deta:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>space<span class="w"> </span>dev
</pre></div>
</div>
<p>Esto iniciar√° el servidor de Deta, que a su vez iniciar√° el servidor de Vite mediante el comando <code class="docutils literal notranslate"><span class="pre">dev</span></code>.</p>
</li>
<li><p><strong>Despliega la aplicaci√≥n en la nube:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>space<span class="w"> </span>push
</pre></div>
</div>
<p>Si el despliegue es exitoso, podr√°s a√±adir el proyecto a tu Horizon, el escritorio virtual de Deta, y acceder a tu aplicaci√≥n en su propia URL una vez publicada.</p>
</li>
</ol>
</section>
<section id="paso-5-acceso-y-gestion-de-la-aplicacion">
<h3>Paso 5: Acceso y Gesti√≥n de la Aplicaci√≥n<a class="headerlink" href="#paso-5-acceso-y-gestion-de-la-aplicacion" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>Horizon</strong>: A√±ade tu proyecto a Horizon para gestionarlo desde un entorno visual.</p></li>
<li><p><strong>URL P√∫blica</strong>: Una vez desplegada, tu aplicaci√≥n estar√° accesible en una URL p√∫blica proporcionada por Deta. Aunque s√≥lo accesible mediante copia privada para usuarios de de Deta. Si queremos que sea totalmente accesible, podemos poner <code class="docutils literal notranslate"><span class="pre">public:</span> <span class="pre">true</span></code> en el <code class="docutils literal notranslate"><span class="pre">micro</span></code> de <code class="docutils literal notranslate"><span class="pre">SpaceFile</span></code>.</p></li>
</ul>
</section>
</section>
<section id="linting-y-formatting">
<h2>Linting y Formatting<a class="headerlink" href="#linting-y-formatting" title="Link to this heading">#</a></h2>
<p>El linting y el formateo son esenciales para mantener el c√≥digo consistente y limpio. Cada miembro del equipo debe seguir las mismas reglas y convenciones al escribir c√≥digo. La consistencia en la base de c√≥digo es fundamental para:</p>
<ul class="simple">
<li><p>No generar confusi√≥n sobre c√≥mo escribir un fragmento de c√≥digo espec√≠fico en tu aplicaci√≥n cuando incorporas a un nuevo miembro del equipo.</p></li>
<li><p>No tener que documentar m√∫ltiples formas de hacer lo mismo.</p></li>
</ul>
<p>El linter m√°s conocido de Javascript es <a class="reference external" href="https://eslint.org/">ESLint</a>. Para ponerlo en funcionamiento:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>install<span class="w"> </span>eslint<span class="w"> </span>--save-dev
npm<span class="w"> </span>init<span class="w"> </span>@eslint/config@latest
</pre></div>
</div>
<p>Y luego instalamos la extensi√≥n de ESLint en el VSCode.</p>
<p>El linter marca como errores tambi√©n los fallos en estilo. Desde cosas como no declarar correctamente variables que pueden provocar problemas en el futuro a reglas de estilo como los espacios que hay que dejar. Esas reglas de estilo est√°n definidas en su configuraci√≥n y se pueden modificar al gusto. Algunas colecciones de reglas conocidas y recomendables son las de Google y AirBnB que est√°n codificadas en EsLint por defecto.</p>
<p>Con la configuraci√≥n anterior, tenemos el c√≥digo lleno de ‚Äúerrores‚Äù, pero nos deja usarlo. No obstante, si queremos que no se pueda poner c√≥digo en producci√≥n que no cumpla las reglas de estilo, podemos crear un Hook de pre-commit que evalue el linter y no deje ejecutar el push si no se cumplen.</p>
<blockquote>
<div><p>Los ‚Äúhooks‚Äù en Git son scripts personalizados que se ejecutan autom√°ticamente en respuesta a eventos espec√≠ficos, como confirmar cambios o fusionar ramas, proporcionando automatizaci√≥n y personalizaci√≥n del flujo de trabajo de Git. Se almacenan en la carpeta <code class="docutils literal notranslate"><span class="pre">.git/hooks</span></code> y pueden realizar acciones antes o despu√©s de eventos como pre-commit, post-commit, pre-push, entre otros.</p>
</div></blockquote>
<p>Hay una aplicaci√≥n que simplifica la creaci√≥n de estos Hooks, se llama <a class="reference external" href="https://typicode.github.io/husky/get-started.html">Husky</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>install<span class="w"> </span>--save-dev<span class="w"> </span>husky
npx<span class="w"> </span>husky<span class="w"> </span>init
</pre></div>
</div>
<p>Estos comandos instalan Husky y crean una carpeta <code class="docutils literal notranslate"><span class="pre">.husky</span></code> donde hay un archivo <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> en el que podemos a√±adir comandos a ejecutar en ese Hook. Es similar a los scripts que se pueden poner en <code class="docutils literal notranslate"><span class="pre">package.json</span></code>. Con estos comandos podemos ejecutar Eslint, tests o lo que se necesite.</p>
<p>En nuestro caso:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npx<span class="w"> </span>eslint
</pre></div>
</div>
<p>Al automatizar el Linter, estamos evitando tener que comprobarlo cada vez, lo cual nos aproxima a un ciclo CI/CD.</p>
<p>Adem√°s de pasar el linter, podemos formatear el c√≥digo con <a class="reference external" href="https://prettier.io/">Prettier</a>:</p>
<p>Instalar:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>install<span class="w"> </span>--save-dev<span class="w"> </span>--save-exact<span class="w"> </span>prettier
</pre></div>
</div>
<p>Comando para el pre-commit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npx<span class="w"> </span>prettier<span class="w"> </span>.<span class="w"> </span>--write
</pre></div>
</div>
</section>
<section id="unit-testing">
<h2>Unit Testing<a class="headerlink" href="#unit-testing" title="Link to this heading">#</a></h2>
<p>Siendo totalmente rigurosos con estas metodolog√≠as, deber√≠amos aplicar t√©cnicas TDD en nuestro desarrollo. Por tanto, los test unitarios forman parte de la etapa de desarrollo, incluso son anteriores a la creaci√≥n del c√≥digo funcional. Generalmente se configuran y programan los test y se mantiene una terminal o una web abierta mientras se programa. De esta manera, cualquier cambio en el c√≥digo se testa y de un vistazo vemos si sigue funcionando o si todav√≠a no funciona nuestro c√≥digo.</p>
<p>Por otra parte, no podemos confiar en que todos los desarrolladores van a hacer caso siempre a los tests o que no se van a equivocar justo antes de hacer un ‚Äúcommit‚Äù. Por tanto, podemos a√±adir los tests a un hook como en la secci√≥n anterior para evitar hacer el commit o podemos configurar GitHub Actions para testar en el propio repositorio. Esto nos permitir√° tambi√©n mantener un registro de los ‚Äúcommits‚Äù y hacer otras acciones como hacer el build y posteriormente poner en producci√≥n.</p>
<section id="instalar-los-tests">
<h3>Instalar los tests<a class="headerlink" href="#instalar-los-tests" title="Link to this heading">#</a></h3>
<p>En este ejemplo, vamos a instalar Vitest, ya que proporciona un soporte nativo a m√≥dulos ESM y una interfaz por terminal c√≥moda para lo que necesitamos. Adem√°s, funciona perfectamente en GitHub Actions.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>install<span class="w"> </span>-D<span class="w"> </span>vitest
</pre></div>
</div>
<p>En un fichero que tenga la palabra <code class="docutils literal notranslate"><span class="pre">.test.js</span></code> pondremos los test que nos interesan.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">expect</span><span class="p">,</span><span class="w"> </span><span class="nx">test</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;vitest&#39;</span><span class="p">;</span>
<span class="p">...</span>
<span class="nx">test</span><span class="p">(</span><span class="s1">&#39;test description&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="p">...</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Si queremos ejecutar los tests en la terminal local, pondremos en el <code class="docutils literal notranslate"><span class="pre">package.json</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;test&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;vitest&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Luego ya lo ejecutamos:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>run<span class="w"> </span><span class="nb">test</span>
</pre></div>
</div>
</section>
<section id="configurar-los-tests-en-github-actions">
<h3>Configurar los tests en GitHub Actions<a class="headerlink" href="#configurar-los-tests-en-github-actions" title="Link to this heading">#</a></h3>
<p>Seguiremos este tutorial: <a class="reference external" href="https://docs.github.com/en/actions/quickstart#creating-your-first-workflow">https://docs.github.com/en/actions/quickstart#creating-your-first-workflow</a> Si lo hacemos m√°s o menos hasta el final, los push provocar√°n que se ejecute el action y muestre el resultado, pero no hace ning√∫n test. En nuestro caso, para hacer los test, podemos modificar el <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> para a√±adirlos:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GitHub Actions Demo</span>
<span class="nt">run-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ github.actor }} is testing out GitHub Actions üöÄ</span>
<span class="nt">on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">push</span><span class="p p-Indicator">]</span>
<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Explore-GitHub-Actions</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &quot;üéâ The job was automatically triggered by a ${{ github.event_name }} event.&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &quot;üêß This job is now running on a ${{ runner.os }} server hosted by GitHub!&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &quot;üîé The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}.&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Check out repository code</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &quot;üí° The ${{ github.repository }} repository has been cloned to the runner.&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &quot;üñ•Ô∏è The workflow is now ready to test your code on the runner.&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">List files in the repository</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">ls ${{ github.workspace }}</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">echo &quot;üçè This job&#39;s status is ${{ job.status }}.&quot;</span>
<span class="w">  </span><span class="nt">Test</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">     </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">       </span><span class="nt">node-version</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;20.x&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Use Node.js ${{ matrix.node-version }}</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-node@v4</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">node-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.node-version }}</span><span class="w">  </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies frontend</span>
<span class="w">      </span><span class="nt">working-directory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm ci</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm test</span>
<span class="w">      </span><span class="nt">working-directory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm test</span>
</pre></div>
</div>
<p>Si no pasa el test mostrar√° un error en la pesta√±a de actions y si lo pasa, el push se ejecuta.</p>
</section>
</section>
<section id="integration-tests">
<h2>Integration Tests<a class="headerlink" href="#integration-tests" title="Link to this heading">#</a></h2>
<p>Las herramientas para hacer tests de integraci√≥n pueden ser las mismas que los unitarios o alguna m√°s especializada. Estas herramientas, en el frontend pueden probar cosas como:</p>
<ul class="simple">
<li><p>La interacci√≥n y navegaci√≥n del usuario.</p></li>
<li><p>El funcionamiento de los formularios.</p></li>
<li><p>La renderizaci√≥n de vistas.</p></li>
<li><p>La comunicaci√≥n con la API.</p></li>
</ul>
<p>En este caso, normalmente es necesario falsear (mocking) las peticiones a la red. Para ello, podemos usar herramientas como msw. Tambi√©n se pueden mockear funciones y eventos, as√≠ como usar esp√≠as para ver si se han ejecutado y cuantas veces.</p>
</section>
<section id="end-2-end-testing">
<h2>End 2 End Testing<a class="headerlink" href="#end-2-end-testing" title="Link to this heading">#</a></h2>
<p>Este tipo de tests son los m√°s complicados porque implica seguir todo el proceso de los usuarios para cada acci√≥n que se realice en la web. Pueden ser muy tediosos de hacer y mantener. Adem√°s, es muy dif√≠cil de simular todas las secuencias que seguir√°n los usuarios, incluso sus errores. El software recomendable puede ser Cypress.</p>
</section>
<section id="build-and-deploy">
<h2>Build and Deploy<a class="headerlink" href="#build-and-deploy" title="Link to this heading">#</a></h2>
<p>Esta tarea la podemos hacer con GitHub Actions, al igual que los test unitarios. En otros casos, esta tarea es simplificada por el servicio en el que hacemos el deploy. En el caso de Deta, la parte del build y el despliegue se realiza directamente mediante un comando. En caso de querer automatizar el despliegue, se puede hacer mediante GitHub Actions contra Deta, sin hacer el build en GitHub.</p>
<p>Para ello, ya hay gente que ha hecho acciones que funcionan m√°s c√≥modamente como esta: <a class="github reference external" href="https://github.com/marketplace/actions/deta-space-deployment-github-action">marketplace/actions</a></p>
<p>Al anterior <code class="docutils literal notranslate"><span class="pre">.yml</span></code> le a√±adiremos la acci√≥n de hacer el push a Deta:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GitHub Actions Demo</span>
<span class="nt">run-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ github.actor }} is testing out GitHub Actions üöÄ</span>
<span class="nt">on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">push</span><span class="p p-Indicator">]</span>
<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Test</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<span class="w">     </span><span class="nt">matrix</span><span class="p">:</span>
<span class="w">       </span><span class="nt">node-version</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;20.x&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Use Node.js ${{ matrix.node-version }}</span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-node@v4</span>
<span class="w">      </span><span class="nt">with</span><span class="p">:</span>
<span class="w">        </span><span class="nt">node-version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ matrix.node-version }}</span><span class="w">  </span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install dependencies frontend</span>
<span class="w">      </span><span class="nt">working-directory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm ci</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm test</span>
<span class="w">      </span><span class="nt">working-directory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">npm test</span>
<span class="w">  </span><span class="nt">push-to-space</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-22.04</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deta Space Deployment GitHub Action</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">neobrains/space-pipe@v0.5</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">access_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.ACCESS_TOKEN }}</span>
<span class="w">          </span><span class="nt">project_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.PROJECT_ID }}</span>
<span class="w">          </span><span class="nt">space_push</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">          </span><span class="nt">list_on_discovery</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>Para tener acceso a <code class="docutils literal notranslate"><span class="pre">secrets.ACCESS_TOKEN</span></code> y a <code class="docutils literal notranslate"><span class="pre">secrets.PROJECT_ID</span></code> se deben obtener de Deta y poner como secretos en el repositorio en Settings &gt; Secrets.</p>
<p>La pr√≥xima vez que se haga un push se realizar√°n los tests y luego el despliegue en Deta.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="vite.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Vite (Dev Server)</p>
      </div>
    </a>
    <a class="right-next"
       href="proyectos.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Proyectos en Javascript</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pasos-tipicos-en-el-desarrollo-web">Pasos T√≠picos en el Desarrollo Web</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deta">Deta</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-1-alta-en-deta-y-configuracion-inicial">Paso 1: Alta en Deta y Configuraci√≥n Inicial</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-2-configuracion-del-spacefile">Paso 2: Configuraci√≥n del Spacefile</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-3-crear-el-proyecto-con-vite">Paso 3: Crear el Proyecto con Vite</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-4-despliegue-en-deta">Paso 4: Despliegue en Deta</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#paso-5-acceso-y-gestion-de-la-aplicacion">Paso 5: Acceso y Gesti√≥n de la Aplicaci√≥n</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#linting-y-formatting">Linting y Formatting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-testing">Unit Testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#instalar-los-tests">Instalar los tests</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configurar-los-tests-en-github-actions">Configurar los tests en GitHub Actions</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#integration-tests">Integration Tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#end-2-end-testing">End 2 End Testing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#build-and-deploy">Build and Deploy</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jose Castillo
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      ¬© Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>